apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-import-dashboards
  labels:
    app: grafana
    component: import-dashboards
data:
  phonebook-dash.json: |  
    { "annotations": { "list": [ { "$$hashKey": "object:724", "builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard" } ] }, "editable": true, "gnetId": null, "graphTooltip": 0, "links": [], "panels": [ { "alert": { "alertRuleTags": {}, "conditions": [ { "evaluator": { "params": [ 0.1 ], "type": "gt" }, "operator": { "type": "and" }, "query": { "params": [ "A", "5m", "now" ] }, "reducer": { "params": [], "type": "avg" }, "type": "query" } ], "executionErrorState": "alerting", "for": "5m", "frequency": "1m", "handler": 1, "message": "Performance problem in phonebook app. Response times are unacceptable.", "name": "Request response time alert", "noDataState": "no_data", "notifications": [] }, "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": null, "fill": 1, "fillGradient": 0, "gridPos": { "h": 8, "w": 12, "x": 0, "y": 0 }, "hiddenSeries": false, "id": 4, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 1, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pluginVersion": "6.7.1", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "http_request_processing_seconds_sum/http_request_processing_seconds_count", "interval": "", "legendFormat": "", "refId": "A" } ], "thresholds": [ { "colorMode": "critical", "fill": true, "line": true, "op": "gt", "value": 0.1 } ], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Request response time", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "$$hashKey": "object:877", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "$$hashKey": "object:878", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": null, "fill": 1, "fillGradient": 0, "gridPos": { "h": 9, "w": 12, "x": 12, "y": 0 }, "hiddenSeries": false, "id": 2, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 1, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "sum by (endpoint)(irate(http_requests_total[1m]))", "interval": "", "legendFormat": "{{endpoint}}", "refId": "A" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Requests per method", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "$$hashKey": "object:798", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "$$hashKey": "object:799", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } } ], "schemaVersion": 22, "style": "dark", "tags": [], "templating": { "list": [] }, "time": { "from": "now-15m", "to": "now" }, "timepicker": { "refresh_intervals": [ "5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d" ] }, "timezone": "", "title": "Phonebook App", "uid": "CPk_FNjWk", "variables": { "list": [] }, "version": 1 }
  node-exporter.json: |
    { "annotations": { "list": [ { "$$hashKey": "object:671", "builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard" } ] }, "editable": true, "gnetId": 1860, "graphTooltip": 0, "id": 3, "iteration": 1586103028685, "links": [], "panels": [ { "collapsed": false, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }, "id": 261, "panels": [], "repeat": null, "title": "Quick CPU / Mem / Disk", "type": "row" }, { "cacheTimeout": null, "datasource": "Prometheus", "description": "Busy state of all CPU cores together", "gridPos": { "h": 4, "w": 3, "x": 0, "y": 1 }, "id": 20, "links": [], "options": { "fieldOptions": { "calcs": [ "lastNotNull" ], "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "id": 0, "op": "=", "text": "N/A", "type": 1, "value": "null" } ], "max": 100, "min": 0, "nullValueMode": "null", "thresholds": { "mode": "absolute", "steps": [ { "color": "rgba(50, 172, 45, 0.97)", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 85 }, { "color": "rgba(245, 54, 54, 0.9)", "value": 95 } ] }, "unit": "percent" }, "overrides": [], "values": false }, "orientation": "horizontal", "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "6.7.1", "targets": [ { "expr": "(((count(count(node_cpu_seconds_total{instance=~\"$node:$port\",job=~\"$job\"}) by (cpu))) - avg(sum by (mode)(irate(node_cpu_seconds_total{mode='idle',instance=~\"$node:$port\",job=~\"$job\"}[5m])))) * 100) / count(count(node_cpu_seconds_total{instance=~\"$node:$port\",job=~\"$job\"}) by (cpu))", "hide": false, "intervalFactor": 1, "legendFormat": "", "refId": "A", "step": 900 } ], "title": "CPU Busy", "type": "gauge" }, { "cacheTimeout": null, "datasource": "Prometheus", "description": "Busy state of all CPU cores together (5 min average)", "gridPos": { "h": 4, "w": 3, "x": 3, "y": 1 }, "id": 155, "links": [], "options": { "fieldOptions": { "calcs": [ "lastNotNull" ], "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "id": 0, "op": "=", "text": "N/A", "type": 1, "value": "null" } ], "max": 100, "min": 0, "nullValueMode": "null", "thresholds": { "mode": "absolute", "steps": [ { "color": "rgba(50, 172, 45, 0.97)", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 85 }, { "color": "rgba(245, 54, 54, 0.9)", "value": 95 } ] }, "unit": "percent" }, "overrides": [], "values": false }, "orientation": "horizontal", "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "6.7.1", "targets": [ { "expr": "avg(node_load5{instance=~\"$node:$port\",job=~\"$job\"}) / count(count(node_cpu_seconds_total{instance=~\"$node:$port\",job=~\"$job\"}) by (cpu)) * 100", "format": "time_series", "hide": false, "intervalFactor": 1, "refId": "A", "step": 900 } ], "title": "Sys Load (5m avg)", "type": "gauge" }, { "cacheTimeout": null, "datasource": "Prometheus", "description": "Busy state of all CPU cores together (15 min average)", "gridPos": { "h": 4, "w": 3, "x": 6, "y": 1 }, "id": 19, "links": [], "options": { "fieldOptions": { "calcs": [ "lastNotNull" ], "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "id": 0, "op": "=", "text": "N/A", "type": 1, "value": "null" } ], "max": 100, "min": 0, "nullValueMode": "null", "thresholds": { "mode": "absolute", "steps": [ { "color": "rgba(50, 172, 45, 0.97)", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 85 }, { "color": "rgba(245, 54, 54, 0.9)", "value": 95 } ] }, "unit": "percent" }, "overrides": [], "values": false }, "orientation": "horizontal", "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "6.7.1", "targets": [ { "expr": "avg(node_load15{instance=~\"$node:$port\",job=~\"$job\"}) / count(count(node_cpu_seconds_total{instance=~\"$node:$port\",job=~\"$job\"}) by (cpu)) * 100", "hide": false, "intervalFactor": 1, "refId": "A", "step": 900 } ], "title": "Sys Load (15m avg)", "type": "gauge" }, { "cacheTimeout": null, "datasource": "Prometheus", "description": "Non available RAM memory", "gridPos": { "h": 4, "w": 3, "x": 9, "y": 1 }, "hideTimeOverride": false, "id": 16, "links": [], "options": { "fieldOptions": { "calcs": [ "lastNotNull" ], "defaults": { "color": { "mode": "thresholds" }, "decimals": 0, "mappings": [], "max": 100, "min": 0, "nullValueMode": "null", "thresholds": { "mode": "absolute", "steps": [ { "color": "rgba(50, 172, 45, 0.97)", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 80 }, { "color": "rgba(245, 54, 54, 0.9)", "value": 90 } ] }, "unit": "percent" }, "overrides": [], "values": false }, "orientation": "horizontal", "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "6.7.1", "targets": [ { "expr": "((node_memory_MemTotal_bytes{instance=~\"$node:$port\",job=~\"$job\"} - node_memory_MemFree_bytes{instance=~\"$node:$port\",job=~\"$job\"}) / (node_memory_MemTotal_bytes{instance=~\"$node:$port\",job=~\"$job\"} )) * 100", "format": "time_series", "hide": true, "intervalFactor": 1, "refId": "A", "step": 900 }, { "expr": "100 - ((node_memory_MemAvailable_bytes{instance=~\"$node:$port\",job=~\"$job\"} * 100) / node_memory_MemTotal_bytes{instance=~\"$node:$port\",job=~\"$job\"})", "format": "time_series", "hide": false, "intervalFactor": 1, "refId": "B", "step": 900 } ], "title": "RAM Used", "type": "gauge" }, { "cacheTimeout": null, "datasource": "Prometheus", "description": "Used Swap", "gridPos": { "h": 4, "w": 3, "x": 12, "y": 1 }, "id": 21, "links": [], "options": { "fieldOptions": { "calcs": [ "lastNotNull" ], "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "id": 0, "op": "=", "text": "N/A", "type": 1, "value": "null" } ], "max": 100, "min": 0, "nullValueMode": "null", "thresholds": { "mode": "absolute", "steps": [ { "color": "rgba(50, 172, 45, 0.97)", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 10 }, { "color": "rgba(245, 54, 54, 0.9)", "value": 25 } ] }, "unit": "percent" }, "overrides": [], "values": false }, "orientation": "horizontal", "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "6.7.1", "targets": [ { "expr": "((node_memory_SwapTotal_bytes{instance=~\"$node:$port\",job=~\"$job\"} - node_memory_SwapFree_bytes{instance=~\"$node:$port\",job=~\"$job\"}) / (node_memory_SwapTotal_bytes{instance=~\"$node:$port\",job=~\"$job\"} )) * 100", "intervalFactor": 1, "refId": "A", "step": 900 } ], "title": "SWAP Used", "type": "gauge" }, { "cacheTimeout": null, "datasource": "Prometheus", "description": "Used Root FS", "gridPos": { "h": 4, "w": 3, "x": 15, "y": 1 }, "id": 154, "links": [], "options": { "fieldOptions": { "calcs": [ "lastNotNull" ], "defaults": { "color": { "mode": "thresholds" }, "mappings": [ { "id": 0, "op": "=", "text": "N/A", "type": 1, "value": "null" } ], "max": 100, "min": 0, "nullValueMode": "null", "thresholds": { "mode": "absolute", "steps": [ { "color": "rgba(50, 172, 45, 0.97)", "value": null }, { "color": "rgba(237, 129, 40, 0.89)", "value": 80 }, { "color": "rgba(245, 54, 54, 0.9)", "value": 90 } ] }, "unit": "percent" }, "overrides": [], "values": false }, "orientation": "horizontal", "showThresholdLabels": false, "showThresholdMarkers": true }, "pluginVersion": "6.7.1", "targets": [ { "expr": "100 - ((node_filesystem_avail_bytes{instance=~\"$node:$port\",job=~\"$job\",mountpoint=\"/\",fstype!=\"rootfs\"} * 100) / node_filesystem_size_bytes{instance=~\"$node:$port\",job=~\"$job\",mountpoint=\"/\",fstype!=\"rootfs\"})", "format": "time_series", "intervalFactor": 1, "refId": "A", "step": 900 } ], "title": "Root FS Used", "type": "gauge" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "datasource": "Prometheus", "description": "Total number of CPU cores", "format": "short", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 2, "w": 2, "x": 18, "y": 1 }, "id": 14, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "maxPerRow": 6, "nullPointMode": "null", "nullText": null, "postfix": "", "postfixFontSize": "50%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "count(count(node_cpu_seconds_total{instance=~\"$node:$port\",job=~\"$job\"}) by (cpu))", "intervalFactor": 1, "refId": "A", "step": 900 } ], "thresholds": "", "title": "CPU Cores", "type": "singlestat", "valueFontSize": "50%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "datasource": "Prometheus", "decimals": 0, "description": "Total RAM", "format": "bytes", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 2, "w": 2, "x": 20, "y": 1 }, "id": 75, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "maxPerRow": 6, "nullPointMode": "null", "nullText": null, "postfix": "", "postfixFontSize": "70%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "node_memory_MemTotal_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "intervalFactor": 1, "refId": "A", "step": 900 } ], "thresholds": "", "title": "RAM Total", "type": "singlestat", "valueFontSize": "50%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "datasource": "Prometheus", "decimals": 0, "description": "Total SWAP", "format": "bytes", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 2, "w": 2, "x": 22, "y": 1 }, "id": 18, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "maxPerRow": 6, "nullPointMode": "null", "nullText": null, "postfix": "", "postfixFontSize": "70%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "node_memory_SwapTotal_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "intervalFactor": 1, "refId": "A", "step": 900 } ], "thresholds": "", "title": "SWAP Total", "type": "singlestat", "valueFontSize": "50%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "datasource": "Prometheus", "decimals": 2, "description": "System Load (1m avg)", "format": "short", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 2, "w": 2, "x": 18, "y": 3 }, "id": 17, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "maxPerRow": 12, "nullPointMode": "null", "nullText": null, "postfix": "", "postfixFontSize": "50%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "node_load1{instance=~\"$node:$port\",job=~\"$job\"}", "hide": false, "intervalFactor": 1, "refId": "A", "step": 900 } ], "thresholds": "", "title": "Sys Load (1m avg)", "type": "singlestat", "valueFontSize": "50%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(50, 172, 45, 0.97)", "rgba(237, 129, 40, 0.89)", "rgba(245, 54, 54, 0.9)" ], "datasource": "Prometheus", "decimals": 0, "description": "Total RootFS", "format": "bytes", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 2, "w": 2, "x": 20, "y": 3 }, "id": 23, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "maxPerRow": 6, "nullPointMode": "null", "nullText": null, "postfix": "", "postfixFontSize": "50%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "node_filesystem_size_bytes{instance=~\"$node:$port\",job=~\"$job\",mountpoint=\"/\",fstype!=\"rootfs\"}", "format": "time_series", "hide": false, "intervalFactor": 1, "refId": "A", "step": 900 } ], "thresholds": "70,90", "title": "RootFS Total", "type": "singlestat", "valueFontSize": "50%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "datasource": "Prometheus", "decimals": 1, "description": "System uptime", "format": "s", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 2, "w": 2, "x": 22, "y": 3 }, "hideTimeOverride": true, "id": 15, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "null", "nullText": null, "postfix": "s", "postfixFontSize": "30%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "node_time_seconds{instance=~\"$node:$port\",job=~\"$job\"} - node_boot_time_seconds{instance=~\"$node:$port\",job=~\"$job\"}", "intervalFactor": 2, "refId": "A", "step": 1800 } ], "thresholds": "", "title": "Uptime", "type": "singlestat", "valueFontSize": "30%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "collapsed": false, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 5 }, "id": 263, "panels": [], "repeat": null, "title": "Basic CPU / Mem / Net / Disk", "type": "row" }, { "aliasColors": { "Busy": "#EAB839", "Busy Iowait": "#890F02", "Busy other": "#1F78C1", "Idle": "#052B51", "Idle - Waiting for something to happen": "#052B51", "guest": "#9AC48A", "idle": "#052B51", "iowait": "#EAB839", "irq": "#BF1B00", "nice": "#C15C17", "softirq": "#E24D42", "steal": "#FCE2DE", "system": "#508642", "user": "#5195CE" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "Basic CPU info", "fill": 4, "fillGradient": 0, "gridPos": { "h": 7, "w": 12, "x": 0, "y": 6 }, "hiddenSeries": false, "id": 77, "legend": { "alignAsTable": false, "avg": false, "current": false, "max": false, "min": false, "rightSide": false, "show": true, "sideWidth": 250, "sort": null, "sortDesc": null, "total": false, "values": false }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": true, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "Busy Iowait", "color": "#890F02" }, { "alias": "Idle", "color": "#7EB26D" }, { "alias": "Busy System", "color": "#EAB839" }, { "alias": "Busy User", "color": "#0A437C" }, { "alias": "Busy Other", "color": "#6D1F62" } ], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "sum by (instance)(irate(node_cpu_seconds_total{mode=\"system\",instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Busy System", "refId": "B", "step": 240 }, { "expr": "sum by (instance)(irate(node_cpu_seconds_total{mode='user',instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Busy User", "refId": "D", "step": 240 }, { "expr": "sum by (instance)(irate(node_cpu_seconds_total{mode='iowait',instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "intervalFactor": 2, "legendFormat": "Busy Iowait", "refId": "E", "step": 240 }, { "expr": "sum by (instance)(irate(node_cpu_seconds_total{mode=~\".*irq\",instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "intervalFactor": 2, "legendFormat": "Busy IRQs", "refId": "F", "step": 240 }, { "expr": "sum (irate(node_cpu_seconds_total{mode!='idle',mode!='user',mode!='system',mode!='iowait',mode!='irq',mode!='softirq',instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "intervalFactor": 2, "legendFormat": "Busy Other", "refId": "A", "step": 240 }, { "expr": "sum by (mode)(irate(node_cpu_seconds_total{mode='idle',instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "intervalFactor": 2, "legendFormat": "Idle", "refId": "C", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "CPU Basic", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "", "logBase": 1, "max": "100", "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Apps": "#629E51", "Buffers": "#614D93", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Free": "#0A437C", "Hardware Corrupted - Amount of RAM that the kernel identified as corrupted / not working": "#CFFAFF", "Inactive": "#584477", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "RAM_Free": "#E0F9D7", "SWAP Used": "#BF1B00", "Slab": "#806EB7", "Slab_Cache": "#E0752D", "Swap": "#BF1B00", "Swap Used": "#BF1B00", "Swap_Cache": "#C15C17", "Swap_Free": "#2F575E", "Unused": "#EAB839" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "Basic memory usage", "fill": 4, "fillGradient": 0, "gridPos": { "h": 7, "w": 12, "x": 12, "y": 6 }, "hiddenSeries": false, "id": 78, "legend": { "alignAsTable": false, "avg": false, "current": false, "max": false, "min": false, "rightSide": false, "show": true, "sideWidth": 350, "total": false, "values": false }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "RAM Total", "color": "#E0F9D7", "fill": 0, "stack": false }, { "alias": "RAM Cache + Buffer", "color": "#052B51" }, { "alias": "RAM Free", "color": "#7EB26D" }, { "alias": "Avaliable", "color": "#DEDAF7", "fill": 0, "stack": false } ], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "node_memory_MemTotal_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "RAM Total", "refId": "A", "step": 240 }, { "expr": "node_memory_MemTotal_bytes{instance=~\"$node:$port\",job=~\"$job\"} - node_memory_MemFree_bytes{instance=~\"$node:$port\",job=~\"$job\"} - (node_memory_Cached_bytes{instance=~\"$node:$port\",job=~\"$job\"} + node_memory_Buffers_bytes{instance=~\"$node:$port\",job=~\"$job\"})", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "RAM Used", "refId": "D", "step": 240 }, { "expr": "node_memory_Cached_bytes{instance=~\"$node:$port\",job=~\"$job\"} + node_memory_Buffers_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "RAM Cache + Buffer", "refId": "B", "step": 240 }, { "expr": "node_memory_MemFree_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "RAM Free", "refId": "F", "step": 240 }, { "expr": "(node_memory_SwapTotal_bytes{instance=~\"$node:$port\",job=~\"$job\"} - node_memory_SwapFree_bytes{instance=~\"$node:$port\",job=~\"$job\"})", "format": "time_series", "intervalFactor": 2, "legendFormat": "SWAP Used", "refId": "G", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Basic", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Recv_bytes_eth2": "#7EB26D", "Recv_bytes_lo": "#0A50A1", "Recv_drop_eth2": "#6ED0E0", "Recv_drop_lo": "#E0F9D7", "Recv_errs_eth2": "#BF1B00", "Recv_errs_lo": "#CCA300", "Trans_bytes_eth2": "#7EB26D", "Trans_bytes_lo": "#0A50A1", "Trans_drop_eth2": "#6ED0E0", "Trans_drop_lo": "#E0F9D7", "Trans_errs_eth2": "#BF1B00", "Trans_errs_lo": "#CCA300", "recv_bytes_lo": "#0A50A1", "recv_drop_eth0": "#99440A", "recv_drop_lo": "#967302", "recv_errs_eth0": "#BF1B00", "recv_errs_lo": "#890F02", "trans_bytes_eth0": "#7EB26D", "trans_bytes_lo": "#0A50A1", "trans_drop_eth0": "#99440A", "trans_drop_lo": "#967302", "trans_errs_eth0": "#BF1B00", "trans_errs_lo": "#890F02" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "Basic network info per interface", "fill": 4, "fillGradient": 0, "gridPos": { "h": 7, "w": 12, "x": 0, "y": 13 }, "hiddenSeries": false, "id": 74, "legend": { "alignAsTable": false, "avg": false, "current": false, "hideEmpty": false, "hideZero": false, "max": false, "min": false, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": false }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*trans.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_network_receive_bytes_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])*8", "format": "time_series", "intervalFactor": 2, "legendFormat": "recv {{device}}", "refId": "A", "step": 240 }, { "expr": "irate(node_network_transmit_bytes_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])*8", "format": "time_series", "intervalFactor": 2, "legendFormat": "trans {{device}} ", "refId": "B", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Network Traffic Basic", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bps", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "pps", "label": "", "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 3, "description": "Disk space used of all filesystems mounted", "fill": 4, "fillGradient": 0, "gridPos": { "h": 7, "w": 12, "x": 12, "y": 13 }, "height": "", "hiddenSeries": false, "id": 152, "legend": { "alignAsTable": false, "avg": false, "current": false, "max": false, "min": false, "rightSide": false, "show": true, "sort": "current", "sortDesc": false, "total": false, "values": false }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "100 - ((node_filesystem_avail_bytes{instance=~\"$node:$port\",job=~\"$job\",device!~'rootfs'} * 100) / node_filesystem_size_bytes{instance=~\"$node:$port\",job=~\"$job\",device!~'rootfs'})", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{mountpoint}}", "refId": "A", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Disk Space Used Basic", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "percent", "label": null, "logBase": 1, "max": "100", "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": true, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 20 }, "id": 265, "panels": [ { "aliasColors": { "Idle - Waiting for something to happen": "#052B51", "guest": "#9AC48A", "idle": "#052B51", "iowait": "#EAB839", "irq": "#BF1B00", "nice": "#C15C17", "softirq": "#E24D42", "steal": "#FCE2DE", "system": "#508642", "user": "#5195CE" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "", "fill": 4, "fillGradient": 0, "gridPos": { "h": 12, "w": 12, "x": 0, "y": 21 }, "hiddenSeries": false, "id": 3, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 250, "sort": null, "sortDesc": null, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": true, "pointradius": 5, "points": false, "renderer": "flot", "repeat": null, "seriesOverrides": [], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "sum by (mode)(irate(node_cpu_seconds_total{mode=\"system\",instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "interval": "10s", "intervalFactor": 2, "legendFormat": "System - Processes executing in kernel mode", "refId": "A", "step": 20 }, { "expr": "sum by (mode)(irate(node_cpu_seconds_total{mode='user',instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "intervalFactor": 2, "legendFormat": "User - Normal processes executing in user mode", "refId": "B", "step": 240 }, { "expr": "sum by (mode)(irate(node_cpu_seconds_total{mode='nice',instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "intervalFactor": 2, "legendFormat": "Nice - Niced processes executing in user mode", "refId": "C", "step": 240 }, { "expr": "sum by (mode)(irate(node_cpu_seconds_total{mode='idle',instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "intervalFactor": 2, "legendFormat": "Idle - Waiting for something to happen", "refId": "F", "step": 240 }, { "expr": "sum by (mode)(irate(node_cpu_seconds_total{mode='iowait',instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "intervalFactor": 2, "legendFormat": "Iowait - Waiting for I/O to complete", "refId": "D", "step": 240 }, { "expr": "sum by (mode)(irate(node_cpu_seconds_total{mode='irq',instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "intervalFactor": 2, "legendFormat": "Irq - Servicing interrupts", "refId": "G", "step": 240 }, { "expr": "sum by (mode)(irate(node_cpu_seconds_total{mode='softirq',instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "intervalFactor": 2, "legendFormat": "Softirq - Servicing softirqs", "refId": "H", "step": 240 }, { "expr": "sum by (mode)(irate(node_cpu_seconds_total{mode='steal',instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "intervalFactor": 2, "legendFormat": "Steal - Time spent in other operating systems when running in a virtualized environment", "refId": "E", "step": 240 }, { "expr": "sum by (mode)(irate(node_cpu_seconds_total{mode='guest',instance=~\"$node:$port\",job=~\"$job\"}[5m])) * 100", "format": "time_series", "intervalFactor": 2, "legendFormat": "Guest - Time spent running a virtual CPU for a guest operating system", "refId": "I", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "CPU", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Percentage", "logBase": 1, "max": "100", "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Apps": "#629E51", "Buffers": "#614D93", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Free": "#0A437C", "Hardware Corrupted - Amount of RAM that the kernel identified as corrupted / not working": "#CFFAFF", "Inactive": "#584477", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "RAM_Free": "#E0F9D7", "Slab": "#806EB7", "Slab_Cache": "#E0752D", "Swap": "#BF1B00", "Swap - Swap memory usage": "#BF1B00", "Swap_Cache": "#C15C17", "Swap_Free": "#2F575E", "Unused": "#EAB839", "Unused - Free memory unassigned": "#052B51" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "", "fill": 4, "fillGradient": 0, "gridPos": { "h": 12, "w": 12, "x": 12, "y": 21 }, "hiddenSeries": false, "id": 24, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 350, "sort": null, "sortDesc": null, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Hardware Corrupted - *./", "stack": false } ], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "node_memory_MemTotal_bytes{instance=~\"$node:$port\",job=~\"$job\"} - node_memory_MemFree_bytes{instance=~\"$node:$port\",job=~\"$job\"} - node_memory_Buffers_bytes{instance=~\"$node:$port\",job=~\"$job\"} - node_memory_Cached_bytes{instance=~\"$node:$port\",job=~\"$job\"} - node_memory_Slab_bytes{instance=~\"$node:$port\",job=~\"$job\"} - node_memory_PageTables_bytes{instance=~\"$node:$port\",job=~\"$job\"} - node_memory_SwapCached_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Apps - Memory used by user-space applications", "refId": "Q", "step": 240 }, { "expr": "node_memory_PageTables_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "PageTables - Memory used to map between virtual and physical memory addresses", "refId": "G", "step": 240 }, { "expr": "node_memory_SwapCached_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "SwapCache - Memory that keeps track of pages that have been fetched from swap but not yet been modified", "refId": "F", "step": 240 }, { "expr": "node_memory_Slab_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Slab - Memory used by the kernel to cache data structures for its own use (caches like inode, dentry, etc)", "refId": "E", "step": 240 }, { "expr": "node_memory_Cached_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Cache - Parked file data (file content) cache", "refId": "C", "step": 240 }, { "expr": "node_memory_Buffers_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Buffers - Block device (e.g. harddisk) cache", "refId": "B", "step": 240 }, { "expr": "node_memory_MemFree_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Unused - Free memory unassigned", "refId": "D", "step": 240 }, { "expr": "(node_memory_SwapTotal_bytes{instance=~\"$node:$port\",job=~\"$job\"} - node_memory_SwapFree_bytes{instance=~\"$node:$port\",job=~\"$job\"})", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Swap - Swap space used", "refId": "I", "step": 240 }, { "expr": "node_memory_HardwareCorrupted_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Hardware Corrupted - Amount of RAM that the kernel identified as corrupted / not working", "refId": "O", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Stack", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "receive_packets_eth0": "#7EB26D", "receive_packets_lo": "#E24D42", "transmit_packets_eth0": "#7EB26D", "transmit_packets_lo": "#E24D42" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 4, "fillGradient": 0, "gridPos": { "h": 12, "w": 12, "x": 0, "y": 33 }, "hiddenSeries": false, "id": 84, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Trans.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_network_receive_bytes_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])*8", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Receive", "refId": "O", "step": 240 }, { "expr": "irate(node_network_transmit_bytes_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])*8", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Transmit", "refId": "P", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Network Traffic", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bps", "label": "Bits out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 3, "description": "", "fill": 4, "fillGradient": 0, "gridPos": { "h": 12, "w": 12, "x": 12, "y": 33 }, "height": "", "hiddenSeries": false, "id": 156, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sort": "current", "sortDesc": false, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_filesystem_size_bytes{instance=~\"$node:$port\",job=~\"$job\",device!~'rootfs'} - node_filesystem_avail_bytes{instance=~\"$node:$port\",job=~\"$job\",device!~'rootfs'}", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{mountpoint}}", "refId": "A", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Disk Space Used", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 12, "w": 12, "x": 0, "y": 45 }, "hiddenSeries": false, "id": 229, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Read.*/", "transform": "negative-Y" }, { "alias": "/.*sda_.*/", "color": "#7EB26D" }, { "alias": "/.*sdb_.*/", "color": "#EAB839" }, { "alias": "/.*sdc_.*/", "color": "#6ED0E0" }, { "alias": "/.*sdd_.*/", "color": "#EF843C" }, { "alias": "/.*sde_.*/", "color": "#E24D42" }, { "alias": "/.*sda1.*/", "color": "#584477" }, { "alias": "/.*sda2_.*/", "color": "#BA43A9" }, { "alias": "/.*sda3_.*/", "color": "#F4D598" }, { "alias": "/.*sdb1.*/", "color": "#0A50A1" }, { "alias": "/.*sdb2.*/", "color": "#BF1B00" }, { "alias": "/.*sdb2.*/", "color": "#BF1B00" }, { "alias": "/.*sdb3.*/", "color": "#E0752D" }, { "alias": "/.*sdc1.*/", "color": "#962D82" }, { "alias": "/.*sdc2.*/", "color": "#614D93" }, { "alias": "/.*sdc3.*/", "color": "#9AC48A" }, { "alias": "/.*sdd1.*/", "color": "#65C5DB" }, { "alias": "/.*sdd2.*/", "color": "#F9934E" }, { "alias": "/.*sdd3.*/", "color": "#EA6460" }, { "alias": "/.*sde1.*/", "color": "#E0F9D7" }, { "alias": "/.*sdd2.*/", "color": "#FCEACA" }, { "alias": "/.*sde3.*/", "color": "#F9E2D2" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_disk_reads_completed_total{instance=~\"$node:$port\",job=~\"$job\",device=~\"[a-z]*[a-z]\"}[5m])", "intervalFactor": 4, "legendFormat": "{{device}} - Reads completed", "refId": "A", "step": 480 }, { "expr": "irate(node_disk_writes_completed_total{instance=~\"$node:$port\",job=~\"$job\",device=~\"[a-z]*[a-z]\"}[5m])", "intervalFactor": 2, "legendFormat": "{{device}} - Writes completed", "refId": "B", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Disk IOps", "tooltip": { "shared": false, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "iops", "label": "IO read (-) / write (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "io time": "#890F02" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 3, "description": "", "fill": 4, "fillGradient": 0, "gridPos": { "h": 12, "w": 12, "x": 12, "y": 45 }, "hiddenSeries": false, "id": 42, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sort": null, "sortDesc": null, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*read*./", "transform": "negative-Y" }, { "alias": "/.*sda.*/", "color": "#7EB26D" }, { "alias": "/.*sdb.*/", "color": "#EAB839" }, { "alias": "/.*sdc.*/", "color": "#6ED0E0" }, { "alias": "/.*sdd.*/", "color": "#EF843C" }, { "alias": "/.*sde.*/", "color": "#E24D42" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_disk_read_bytes_total{instance=~\"$node:$port\",job=~\"$job\",device=~\"[a-z]*[a-z]\"}[5m])", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "{{device}} - Successfully read bytes", "refId": "A", "step": 240 }, { "expr": "irate(node_disk_written_bytes_total{instance=~\"$node:$port\",job=~\"$job\",device=~\"[a-z]*[a-z]\"}[5m])", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "{{device}} - Successfully written bytes", "refId": "B", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "I/O Usage Read / Write", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": false, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes read (-) / write (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "ms", "label": "", "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "io time": "#890F02" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 3, "description": "", "fill": 4, "fillGradient": 0, "gridPos": { "h": 12, "w": 12, "x": 0, "y": 57 }, "hiddenSeries": false, "id": 127, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sort": null, "sortDesc": null, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_disk_io_time_seconds_total{instance=~\"$node:$port\",job=~\"$job\",device=~\"[a-z]*[a-z]\"} [5m])", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "{{device}} - Time spent doing I/Os", "refId": "C", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "I/O Usage Times", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": false, "values": [] }, "yaxes": [ { "format": "s", "label": "Time", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "s", "label": "", "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } } ], "repeat": null, "title": "CPU / Memory / Net / Disk", "type": "row" }, { "collapsed": true, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 21 }, "id": 266, "panels": [ { "aliasColors": { "Apps": "#629E51", "Buffers": "#614D93", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Free": "#0A437C", "Hardware Corrupted - Amount of RAM that the kernel identified as corrupted / not working": "#CFFAFF", "Inactive": "#584477", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "RAM_Free": "#E0F9D7", "Slab": "#806EB7", "Slab_Cache": "#E0752D", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Swap_Free": "#2F575E", "Unused": "#EAB839" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 8 }, "hiddenSeries": false, "id": 136, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 350, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 2, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "node_memory_Inactive_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Inactive - Memory which has been less recently used. It is more eligible to be reclaimed for other purposes", "refId": "K", "step": 4 }, { "expr": "node_memory_Active_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Active - Memory that has been used more recently and usually not reclaimed unless absolutely necessary", "refId": "J", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Active / Inactive", "tooltip": { "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Apps": "#629E51", "Buffers": "#614D93", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Free": "#0A437C", "Hardware Corrupted - Amount of RAM that the kernel identified as corrupted / not working": "#CFFAFF", "Inactive": "#584477", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "RAM_Free": "#E0F9D7", "Slab": "#806EB7", "Slab_Cache": "#E0752D", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Swap_Free": "#2F575E", "Unused": "#EAB839" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 8 }, "hiddenSeries": false, "id": 135, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 350, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Committed_AS - *./" }, { "alias": "/.*CommitLimit - *./", "color": "#BF1B00", "fill": 0 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_memory_Committed_AS_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Committed_AS - Amount of memory presently allocated on the system", "refId": "A", "step": 4 }, { "expr": "node_memory_CommitLimit_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "CommitLimit - Amount of memory currently available to be allocated on the system", "refId": "M", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Commited", "tooltip": { "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Apps": "#629E51", "Buffers": "#614D93", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Free": "#0A437C", "Hardware Corrupted - Amount of RAM that the kernel identified as corrupted / not working": "#CFFAFF", "Inactive": "#584477", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "RAM_Free": "#E0F9D7", "Slab": "#806EB7", "Slab_Cache": "#E0752D", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Swap_Free": "#2F575E", "Unused": "#EAB839" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 18 }, "hiddenSeries": false, "id": 191, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 350, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "node_memory_Inactive_file_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Inactive_file - File-backed memory on inactive LRU list", "refId": "A", "step": 4 }, { "expr": "node_memory_Inactive_anon_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Inactive_anon - Anonymous and swap cache on inactive LRU list, including tmpfs (shmem)", "refId": "D", "step": 4 }, { "expr": "node_memory_Active_file_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Active_file - File-backed memory on active LRU list", "refId": "B", "step": 4 }, { "expr": "node_memory_Active_anon_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Active_anon - Anonymous and swap cache on active least-recently-used (LRU) list, including tmpfs", "refId": "C", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Active / Inactive Detail", "tooltip": { "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "bytes", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Active": "#99440A", "Buffers": "#58140C", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Dirty": "#6ED0E0", "Free": "#B7DBAB", "Inactive": "#EA6460", "Mapped": "#052B51", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "Slab_Cache": "#EAB839", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Total": "#511749", "Total RAM": "#052B51", "Total RAM + Swap": "#052B51", "Total Swap": "#614D93", "VmallocUsed": "#EA6460" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 18 }, "hiddenSeries": false, "id": 130, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": null, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 2, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_memory_Writeback_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Writeback - Memory which is actively being written back to disk", "refId": "J", "step": 4 }, { "expr": "node_memory_WritebackTmp_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "WritebackTmp - Memory used by FUSE for temporary writeback buffers", "refId": "K", "step": 4 }, { "expr": "node_memory_Dirty_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Dirty - Memory which is waiting to get written back to the disk", "refId": "A", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Writeback and Dirty", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Apps": "#629E51", "Buffers": "#614D93", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Free": "#0A437C", "Hardware Corrupted - Amount of RAM that the kernel identified as corrupted / not working": "#CFFAFF", "Inactive": "#584477", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "RAM_Free": "#E0F9D7", "Slab": "#806EB7", "Slab_Cache": "#E0752D", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Swap_Free": "#2F575E", "Unused": "#EAB839" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 28 }, "hiddenSeries": false, "id": 138, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 350, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_memory_Mapped_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Mapped - Used memory in mapped pages files which have been mmaped, such as libraries", "refId": "A", "step": 4 }, { "expr": "node_memory_Shmem_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Shmem - Used shared memory (shared between several processes, thus including RAM disks)", "refId": "B", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Shared and Mapped", "tooltip": { "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Active": "#99440A", "Buffers": "#58140C", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Dirty": "#6ED0E0", "Free": "#B7DBAB", "Inactive": "#EA6460", "Mapped": "#052B51", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "Slab_Cache": "#EAB839", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Total": "#511749", "Total RAM": "#052B51", "Total RAM + Swap": "#052B51", "Total Swap": "#614D93", "VmallocUsed": "#EA6460" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 28 }, "hiddenSeries": false, "id": 131, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": null, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 2, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "node_memory_SUnreclaim_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "SUnreclaim - Part of Slab, that cannot be reclaimed on memory pressure", "refId": "O", "step": 4 }, { "expr": "node_memory_SReclaimable_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "SReclaimable - Part of Slab, that might be reclaimed, such as caches", "refId": "N", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Slab", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Active": "#99440A", "Buffers": "#58140C", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Dirty": "#6ED0E0", "Free": "#B7DBAB", "Inactive": "#EA6460", "Mapped": "#052B51", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "Slab_Cache": "#EAB839", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Total": "#511749", "Total RAM": "#052B51", "Total RAM + Swap": "#052B51", "VmallocUsed": "#EA6460" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 38 }, "hiddenSeries": false, "id": 70, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": null, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_memory_VmallocChunk_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "VmallocChunk - Largest contigious block of vmalloc area which is free", "refId": "H", "step": 4 }, { "expr": "node_memory_VmallocTotal_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "VmallocTotal - Total size of vmalloc memory area", "refId": "I", "step": 4 }, { "expr": "node_memory_VmallocUsed_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "VmallocUsed - Amount of vmalloc area which is used", "refId": "O", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Vmalloc", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Apps": "#629E51", "Buffers": "#614D93", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Free": "#0A437C", "Hardware Corrupted - Amount of RAM that the kernel identified as corrupted / not working": "#CFFAFF", "Inactive": "#584477", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "RAM_Free": "#E0F9D7", "Slab": "#806EB7", "Slab_Cache": "#E0752D", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Swap_Free": "#2F575E", "Unused": "#EAB839" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 38 }, "hiddenSeries": false, "id": 159, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 350, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_memory_Bounce_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Bounce - Memory used for block device bounce buffers", "refId": "N", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Bounce", "tooltip": { "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Active": "#99440A", "Buffers": "#58140C", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Dirty": "#6ED0E0", "Free": "#B7DBAB", "Inactive": "#EA6460", "Mapped": "#052B51", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "Slab_Cache": "#EAB839", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Total": "#511749", "Total RAM": "#052B51", "Total RAM + Swap": "#052B51", "VmallocUsed": "#EA6460" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 48 }, "hiddenSeries": false, "id": 129, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": null, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Inactive *./", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_memory_AnonHugePages_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "AnonHugePages - Memory in anonymous huge pages", "refId": "D", "step": 4 }, { "expr": "node_memory_AnonPages_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "AnonPages - Memory in user pages not backed by files", "refId": "G", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Anonymous", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Apps": "#629E51", "Buffers": "#614D93", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Free": "#0A437C", "Hardware Corrupted - Amount of RAM that the kernel identified as corrupted / not working": "#CFFAFF", "Inactive": "#584477", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "RAM_Free": "#E0F9D7", "Slab": "#806EB7", "Slab_Cache": "#E0752D", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Swap_Free": "#2F575E", "Unused": "#EAB839" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 48 }, "hiddenSeries": false, "id": 160, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 350, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 2, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_memory_KernelStack_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "KernelStack - Kernel memory stack. This is not reclaimable", "refId": "N", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Kernel", "tooltip": { "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Active": "#99440A", "Buffers": "#58140C", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Dirty": "#6ED0E0", "Free": "#B7DBAB", "Inactive": "#EA6460", "Mapped": "#052B51", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "Slab_Cache": "#EAB839", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Total": "#511749", "Total RAM": "#806EB7", "Total RAM + Swap": "#806EB7", "VmallocUsed": "#EA6460" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 58 }, "hiddenSeries": false, "id": 140, "legend": { "alignAsTable": true, "avg": false, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": null, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_memory_HugePages_Free{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "HugePages_Free - Huge pages in the pool that are not yet allocated", "refId": "I", "step": 4 }, { "expr": "node_memory_HugePages_Rsvd{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "HugePages_Rsvd - Huge pages for which a commitment to allocate from the pool has been made, but no allocation has yet been made", "refId": "J", "step": 4 }, { "expr": "node_memory_HugePages_Surp{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "HugePages_Surp - Huge pages in the pool above the value in /proc/sys/vm/nr_hugepages", "refId": "K", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory HugePages Counter", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Pages", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": "", "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Active": "#99440A", "Buffers": "#58140C", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Dirty": "#6ED0E0", "Free": "#B7DBAB", "Inactive": "#EA6460", "Mapped": "#052B51", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "Slab_Cache": "#EAB839", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Total": "#511749", "Total RAM": "#806EB7", "Total RAM + Swap": "#806EB7", "VmallocUsed": "#EA6460" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 58 }, "hiddenSeries": false, "id": 71, "legend": { "alignAsTable": true, "avg": false, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": null, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 2, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_memory_HugePages_Total{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "HugePages - Total size of the pool of huge pages", "refId": "L", "step": 4 }, { "expr": "node_memory_Hugepagesize_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Hugepagesize - Huge Page size", "refId": "D", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory HugePages Size", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": "", "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Active": "#99440A", "Buffers": "#58140C", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Dirty": "#6ED0E0", "Free": "#B7DBAB", "Inactive": "#EA6460", "Mapped": "#052B51", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "Slab_Cache": "#EAB839", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Total": "#511749", "Total RAM": "#052B51", "Total RAM + Swap": "#052B51", "VmallocUsed": "#EA6460" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 68 }, "hiddenSeries": false, "id": 128, "legend": { "alignAsTable": true, "avg": true, "current": false, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": null, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_memory_DirectMap1G_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "DirectMap1G - Amount of pages mapped as this size", "refId": "J", "step": 4 }, { "expr": "node_memory_DirectMap2M_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "DirectMap2M - Amount of pages mapped as this size", "refId": "K", "step": 4 }, { "expr": "node_memory_DirectMap4k_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "DirectMap4K - Amount of pages mapped as this size", "refId": "L", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory DirectMap", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Apps": "#629E51", "Buffers": "#614D93", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Free": "#0A437C", "Hardware Corrupted - Amount of RAM that the kernel identified as corrupted / not working": "#CFFAFF", "Inactive": "#584477", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "RAM_Free": "#E0F9D7", "Slab": "#806EB7", "Slab_Cache": "#E0752D", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Swap_Free": "#2F575E", "Unused": "#EAB839" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 68 }, "hiddenSeries": false, "id": 137, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 350, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_memory_Unevictable_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Unevictable - Amount of unevictable memory that can't be swapped out for a variety of reasons", "refId": "P", "step": 4 }, { "expr": "node_memory_Mlocked_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "MLocked - Size of pages locked to memory using the mlock() system call", "refId": "C", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Unevictable and MLocked", "tooltip": { "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Active": "#99440A", "Buffers": "#58140C", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Dirty": "#6ED0E0", "Free": "#B7DBAB", "Inactive": "#EA6460", "Mapped": "#052B51", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "Slab_Cache": "#EAB839", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Total": "#511749", "Total RAM": "#052B51", "Total RAM + Swap": "#052B51", "Total Swap": "#614D93", "VmallocUsed": "#EA6460" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 78 }, "hiddenSeries": false, "id": 132, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": null, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_memory_NFS_Unstable_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "NFS Unstable - Memory in NFS pages sent to the server, but not yet commited to the storage", "refId": "L", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory NFS", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } } ], "repeat": null, "title": "Memory Meminfo", "type": "row" }, { "collapsed": true, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 22 }, "id": 267, "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 5 }, "hiddenSeries": false, "id": 176, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*out/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_vmstat_pgpgin{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "Pagesin - Page in operations", "refId": "A", "step": 4 }, { "expr": "irate(node_vmstat_pgpgout{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "Pagesout - Page out operations", "refId": "B", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Pages In / Out", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Pages out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 5 }, "hiddenSeries": false, "id": 22, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*out/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_vmstat_pswpin{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "Pswpin - Pages swapped in", "refId": "A", "step": 4 }, { "expr": "irate(node_vmstat_pswpout{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "Pswpout - Pages swapped out", "refId": "B", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Pages Swap In / Out", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Pages out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Apps": "#629E51", "Buffers": "#614D93", "Cache": "#6D1F62", "Cached": "#511749", "Committed": "#508642", "Free": "#0A437C", "Hardware Corrupted - Amount of RAM that the kernel identified as corrupted / not working": "#CFFAFF", "Inactive": "#584477", "PageTables": "#0A50A1", "Page_Tables": "#0A50A1", "RAM_Free": "#E0F9D7", "Slab": "#806EB7", "Slab_Cache": "#E0752D", "Swap": "#BF1B00", "Swap_Cache": "#C15C17", "Swap_Free": "#2F575E", "Unused": "#EAB839" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 15 }, "hiddenSeries": false, "id": 175, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 350, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "Pgfault - Page major and minor fault operations", "fill": 0, "stack": false } ], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "irate(node_vmstat_pgfault{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "Pgfault - Page major and minor fault operations", "refId": "C", "step": 4 }, { "expr": "irate(node_vmstat_pgmajfault{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "Pgmajfault - Major page fault operations", "refId": "F", "step": 4 }, { "expr": "irate(node_vmstat_pgfault{instance=~\"$node:$port\",job=~\"$job\"}[5m]) - irate(node_vmstat_pgmajfault{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "Pgminfault - Minor page fault operations", "refId": "A", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Memory Page Faults", "tooltip": { "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Faults", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } } ], "repeat": null, "title": "Memory Vmstat", "type": "row" }, { "collapsed": true, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 23 }, "id": 293, "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 24 }, "hiddenSeries": false, "id": 260, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Variation*./", "color": "#890F02" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_timex_estimated_error_seconds{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "interval": "", "intervalFactor": 2, "legendFormat": "Estimated error in seconds", "refId": "B", "step": 240 }, { "expr": "node_timex_offset_seconds{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "interval": "", "intervalFactor": 2, "legendFormat": "Time offset in between local system and reference clock", "refId": "A", "step": 240 }, { "expr": "node_timex_maxerror_seconds{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "interval": "", "intervalFactor": 2, "legendFormat": "Maximum error in seconds", "refId": "C", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Time Syncronized Drift", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "s", "label": "Seconds", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 24 }, "hiddenSeries": false, "id": 291, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_timex_loop_time_constant{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "Phase-locked loop time adjust", "refId": "B", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Time PLL Adjust", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 34 }, "hiddenSeries": false, "id": 168, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Variation*./", "color": "#890F02" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_timex_sync_status{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "Is clock synchronized to a reliable server (1 = yes, 0 = no)", "refId": "B", "step": 240 }, { "expr": "node_timex_frequency_adjustment_ratio{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "Local clock frequency adjustment", "refId": "A", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Time Syncronized Status", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 34 }, "hiddenSeries": false, "id": 294, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_timex_tick_seconds{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "Seconds between clock ticks", "refId": "B", "step": 240 }, { "expr": "node_timex_tai_offset_seconds{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "International Atomic Time (TAI) offset", "refId": "A", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Time Misc", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "s", "label": "Seconds", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } } ], "title": "System Timesync", "type": "row" }, { "collapsed": true, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 24 }, "id": 269, "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 11 }, "hiddenSeries": false, "id": 8, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "repeat": null, "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_context_switches_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "Context switches", "refId": "A", "step": 240 }, { "expr": "irate(node_intr_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "Interrupts", "refId": "B", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Context Switches / Interrupts", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 11 }, "hiddenSeries": false, "id": 7, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "repeat": null, "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_load1{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 4, "legendFormat": "Load 1m", "refId": "A", "step": 480 }, { "expr": "node_load5{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 4, "legendFormat": "Load 5m", "refId": "B", "step": 480 }, { "expr": "node_load15{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 4, "legendFormat": "Load 15m", "refId": "C", "step": 480 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "System Load", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Load", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 21 }, "hiddenSeries": false, "id": 259, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Critical*./", "color": "#E24D42", "fill": 0 }, { "alias": "/.*Max*./", "color": "#EF843C", "fill": 0 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_interrupts_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "{{ type }} - {{ info }}", "refId": "A", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Interrupts Detail", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 21 }, "hiddenSeries": false, "id": 64, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Max*./", "color": "#890F02", "fill": 0 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "process_max_fds{instance=~\"$node:$port\",job=~\"$job\"}", "interval": "", "intervalFactor": 2, "legendFormat": "Maximum open file descriptors", "refId": "A", "step": 240 }, { "expr": "process_open_fds{instance=~\"$node:$port\",job=~\"$job\"}", "interval": "", "intervalFactor": 2, "legendFormat": "Open file descriptors", "refId": "B", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "File Descriptors", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Descriptors", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 31 }, "hiddenSeries": false, "id": 151, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_entropy_available_bits{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Entropy available to random number generators", "refId": "C", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Entropy", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Entropy", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 31 }, "hiddenSeries": false, "id": 62, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_procs_blocked{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Processes blocked waiting for I/O to complete", "refId": "A", "step": 240 }, { "expr": "node_procs_running{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Processes in runnable state", "refId": "B", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Processes State", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Processes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 41 }, "hiddenSeries": false, "id": 148, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_forks_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Processes forks second", "refId": "C", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Processes Forks", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Forks / sec", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 41 }, "hiddenSeries": false, "id": 149, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Max.*/", "fill": 0 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(process_virtual_memory_bytes{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "hide": false, "interval": "", "intervalFactor": 2, "legendFormat": "Processes virtual memory size in bytes", "refId": "C", "step": 240 }, { "expr": "process_resident_memory_max_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "hide": false, "interval": "", "intervalFactor": 2, "legendFormat": "Maximum amount of virtual memory available in bytes", "refId": "A", "step": 240 }, { "expr": "irate(process_virtual_memory_bytes{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "hide": false, "interval": "", "intervalFactor": 2, "legendFormat": "Processes virtual memory size in bytes", "refId": "B", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Processes Memory", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "decbytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 51 }, "hiddenSeries": false, "id": 158, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Critical*./", "color": "#E24D42", "fill": 0 }, { "alias": "/.*Max*./", "color": "#EF843C", "fill": 0 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_hwmon_temp_celsius{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "{{ chip }} {{ sensor }} temp", "refId": "A", "step": 240 }, { "expr": "node_hwmon_temp_crit_alarm_celsius{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": true, "interval": "", "intervalFactor": 2, "legendFormat": "{{ chip }} {{ sensor }} Critical Alarm", "refId": "B", "step": 240 }, { "expr": "node_hwmon_temp_crit_celsius{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "{{ chip }} {{ sensor }} Critical", "refId": "C", "step": 240 }, { "expr": "node_hwmon_temp_crit_hyst_celsius{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": true, "interval": "", "intervalFactor": 2, "legendFormat": "{{ chip }} {{ sensor }} Critical Historical", "refId": "D", "step": 240 }, { "expr": "node_hwmon_temp_max_celsius{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": true, "interval": "", "intervalFactor": 2, "legendFormat": "{{ chip }} {{ sensor }} Max", "refId": "E", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Hardware temperature monitor", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "celsius", "label": "Temperature", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } } ], "repeat": null, "title": "System Misc", "type": "row" }, { "collapsed": true, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 25 }, "id": 296, "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 12 }, "hiddenSeries": false, "id": 297, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_systemd_socket_accepted_connections_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "{{ name }} Connections", "refId": "A", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Systemd Sockets", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 12 }, "hiddenSeries": false, "id": 298, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "Failed", "color": "#F2495C" }, { "alias": "Inactive", "color": "#FF9830" }, { "alias": "Active", "color": "#73BF69" }, { "alias": "Deactivating", "color": "#FFCB7D" }, { "alias": "Activating", "color": "#C8F2C2" } ], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "node_systemd_units{instance=~\"$node:$port\",job=~\"$job\",state=\"activating\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "Activating", "refId": "A", "step": 240 }, { "expr": "node_systemd_units{instance=~\"$node:$port\",job=~\"$job\",state=\"active\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "Active", "refId": "C", "step": 240 }, { "expr": "node_systemd_units{instance=~\"$node:$port\",job=~\"$job\",state=\"deactivating\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "Deactivating", "refId": "D", "step": 240 }, { "expr": "node_systemd_units{instance=~\"$node:$port\",job=~\"$job\",state=\"failed\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "Failed", "refId": "E", "step": 240 }, { "expr": "node_systemd_units{instance=~\"$node:$port\",job=~\"$job\",state=\"inactive\"}", "format": "time_series", "interval": "", "intervalFactor": 2, "legendFormat": "Inactive", "refId": "F", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Systemd Units State", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } } ], "title": "Systemd", "type": "row" }, { "collapsed": true, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 26 }, "id": 270, "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 9 }, "hiddenSeries": false, "id": 9, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "repeat": null, "seriesOverrides": [ { "alias": "/.*Read.*/", "transform": "negative-Y" }, { "alias": "/.*sda_.*/", "color": "#7EB26D" }, { "alias": "/.*sdb_.*/", "color": "#EAB839" }, { "alias": "/.*sdc_.*/", "color": "#6ED0E0" }, { "alias": "/.*sdd_.*/", "color": "#EF843C" }, { "alias": "/.*sde_.*/", "color": "#E24D42" }, { "alias": "/.*sda1.*/", "color": "#584477" }, { "alias": "/.*sda2_.*/", "color": "#BA43A9" }, { "alias": "/.*sda3_.*/", "color": "#F4D598" }, { "alias": "/.*sdb1.*/", "color": "#0A50A1" }, { "alias": "/.*sdb2.*/", "color": "#BF1B00" }, { "alias": "/.*sdb3.*/", "color": "#E0752D" }, { "alias": "/.*sdc1.*/", "color": "#962D82" }, { "alias": "/.*sdc2.*/", "color": "#614D93" }, { "alias": "/.*sdc3.*/", "color": "#9AC48A" }, { "alias": "/.*sdd1.*/", "color": "#65C5DB" }, { "alias": "/.*sdd2.*/", "color": "#F9934E" }, { "alias": "/.*sdd3.*/", "color": "#EA6460" }, { "alias": "/.*sde1.*/", "color": "#E0F9D7" }, { "alias": "/.*sdd2.*/", "color": "#FCEACA" }, { "alias": "/.*sde3.*/", "color": "#F9E2D2" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_disk_reads_completed_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "intervalFactor": 4, "legendFormat": "{{device}} - Reads completed", "refId": "A", "step": 8 }, { "expr": "irate(node_disk_writes_completed_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "intervalFactor": 2, "legendFormat": "{{device}} - Writes completed", "refId": "B", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Disk IOps Completed", "tooltip": { "shared": false, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "iops", "label": "IO read (-) / write (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 9 }, "hiddenSeries": false, "id": 33, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Read.*/", "transform": "negative-Y" }, { "alias": "/.*sda_.*/", "color": "#7EB26D" }, { "alias": "/.*sdb_.*/", "color": "#EAB839" }, { "alias": "/.*sdc_.*/", "color": "#6ED0E0" }, { "alias": "/.*sdd_.*/", "color": "#EF843C" }, { "alias": "/.*sde_.*/", "color": "#E24D42" }, { "alias": "/.*sda1.*/", "color": "#584477" }, { "alias": "/.*sda2_.*/", "color": "#BA43A9" }, { "alias": "/.*sda3_.*/", "color": "#F4D598" }, { "alias": "/.*sdb1.*/", "color": "#0A50A1" }, { "alias": "/.*sdb2.*/", "color": "#BF1B00" }, { "alias": "/.*sdb3.*/", "color": "#E0752D" }, { "alias": "/.*sdc1.*/", "color": "#962D82" }, { "alias": "/.*sdc2.*/", "color": "#614D93" }, { "alias": "/.*sdc3.*/", "color": "#9AC48A" }, { "alias": "/.*sdd1.*/", "color": "#65C5DB" }, { "alias": "/.*sdd2.*/", "color": "#F9934E" }, { "alias": "/.*sdd3.*/", "color": "#EA6460" }, { "alias": "/.*sde1.*/", "color": "#E0F9D7" }, { "alias": "/.*sdd2.*/", "color": "#FCEACA" }, { "alias": "/.*sde3.*/", "color": "#F9E2D2" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_disk_read_bytes_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 4, "legendFormat": "{{device}} - Read bytes", "refId": "A", "step": 8 }, { "expr": "irate(node_disk_written_bytes_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Written bytes", "refId": "B", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Disk R/W Data", "tooltip": { "shared": false, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "Bps", "label": "Bytes read (-) / write (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 3, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 19 }, "hiddenSeries": false, "id": 37, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": true, "max": true, "min": true, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Read.*/", "transform": "negative-Y" }, { "alias": "/.*sda_.*/", "color": "#7EB26D" }, { "alias": "/.*sdb_.*/", "color": "#EAB839" }, { "alias": "/.*sdc_.*/", "color": "#6ED0E0" }, { "alias": "/.*sdd_.*/", "color": "#EF843C" }, { "alias": "/.*sde_.*/", "color": "#E24D42" }, { "alias": "/.*sda1.*/", "color": "#584477" }, { "alias": "/.*sda2_.*/", "color": "#BA43A9" }, { "alias": "/.*sda3_.*/", "color": "#F4D598" }, { "alias": "/.*sdb1.*/", "color": "#0A50A1" }, { "alias": "/.*sdb2.*/", "color": "#BF1B00" }, { "alias": "/.*sdb3.*/", "color": "#E0752D" }, { "alias": "/.*sdc1.*/", "color": "#962D82" }, { "alias": "/.*sdc2.*/", "color": "#614D93" }, { "alias": "/.*sdc3.*/", "color": "#9AC48A" }, { "alias": "/.*sdd1.*/", "color": "#65C5DB" }, { "alias": "/.*sdd2.*/", "color": "#F9934E" }, { "alias": "/.*sdd3.*/", "color": "#EA6460" }, { "alias": "/.*sde1.*/", "color": "#E0F9D7" }, { "alias": "/.*sdd2.*/", "color": "#FCEACA" }, { "alias": "/.*sde3.*/", "color": "#F9E2D2" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_disk_read_time_seconds_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "hide": false, "intervalFactor": 4, "legendFormat": "{{device}} - Read time", "refId": "A", "step": 8 }, { "expr": "irate(node_disk_write_time_seconds_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "hide": false, "intervalFactor": 2, "legendFormat": "{{device}} - Write time", "refId": "B", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Disk R/W Time", "tooltip": { "shared": false, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "s", "label": "Time. read (-) / write (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 19 }, "hiddenSeries": false, "id": 35, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": true, "max": true, "min": true, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*sda_.*/", "color": "#7EB26D" }, { "alias": "/.*sdb_.*/", "color": "#EAB839" }, { "alias": "/.*sdc_.*/", "color": "#6ED0E0" }, { "alias": "/.*sdd_.*/", "color": "#EF843C" }, { "alias": "/.*sde_.*/", "color": "#E24D42" }, { "alias": "/.*sda1.*/", "color": "#584477" }, { "alias": "/.*sda2_.*/", "color": "#BA43A9" }, { "alias": "/.*sda3_.*/", "color": "#F4D598" }, { "alias": "/.*sdb1.*/", "color": "#0A50A1" }, { "alias": "/.*sdb2.*/", "color": "#BF1B00" }, { "alias": "/.*sdb3.*/", "color": "#E0752D" }, { "alias": "/.*sdc1.*/", "color": "#962D82" }, { "alias": "/.*sdc2.*/", "color": "#614D93" }, { "alias": "/.*sdc3.*/", "color": "#9AC48A" }, { "alias": "/.*sdd1.*/", "color": "#65C5DB" }, { "alias": "/.*sdd2.*/", "color": "#F9934E" }, { "alias": "/.*sdd3.*/", "color": "#EA6460" }, { "alias": "/.*sde1.*/", "color": "#E0F9D7" }, { "alias": "/.*sdd2.*/", "color": "#FCEACA" }, { "alias": "/.*sde3.*/", "color": "#F9E2D2" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_disk_io_time_weighted_seconds_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "intervalFactor": 4, "legendFormat": "{{device}} - IO time weighted", "refId": "A", "step": 8 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Disk IOs Weighted", "tooltip": { "shared": false, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "s", "label": "Time", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 29 }, "hiddenSeries": false, "id": 133, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": true, "max": true, "min": true, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Read.*/", "transform": "negative-Y" }, { "alias": "/.*sda_.*/", "color": "#7EB26D" }, { "alias": "/.*sdb_.*/", "color": "#EAB839" }, { "alias": "/.*sdc_.*/", "color": "#6ED0E0" }, { "alias": "/.*sdd_.*/", "color": "#EF843C" }, { "alias": "/.*sde_.*/", "color": "#E24D42" }, { "alias": "/.*sda1.*/", "color": "#584477" }, { "alias": "/.*sda2_.*/", "color": "#BA43A9" }, { "alias": "/.*sda3_.*/", "color": "#F4D598" }, { "alias": "/.*sdb1.*/", "color": "#0A50A1" }, { "alias": "/.*sdb2.*/", "color": "#BF1B00" }, { "alias": "/.*sdb3.*/", "color": "#E0752D" }, { "alias": "/.*sdc1.*/", "color": "#962D82" }, { "alias": "/.*sdc2.*/", "color": "#614D93" }, { "alias": "/.*sdc3.*/", "color": "#9AC48A" }, { "alias": "/.*sdd1.*/", "color": "#65C5DB" }, { "alias": "/.*sdd2.*/", "color": "#F9934E" }, { "alias": "/.*sdd3.*/", "color": "#EA6460" }, { "alias": "/.*sde1.*/", "color": "#E0F9D7" }, { "alias": "/.*sdd2.*/", "color": "#FCEACA" }, { "alias": "/.*sde3.*/", "color": "#F9E2D2" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_disk_reads_merged_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "intervalFactor": 2, "legendFormat": "{{device}} - Read merged", "refId": "C", "step": 4 }, { "expr": "irate(node_disk_writes_merged_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "intervalFactor": 2, "legendFormat": "{{device}} - Write merged", "refId": "D", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Disk R/W Merged", "tooltip": { "shared": false, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "iops", "label": "I/Os", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 3, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 29 }, "hiddenSeries": false, "id": 36, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": true, "max": true, "min": true, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*sda_.*/", "color": "#7EB26D" }, { "alias": "/.*sdb_.*/", "color": "#EAB839" }, { "alias": "/.*sdc_.*/", "color": "#6ED0E0" }, { "alias": "/.*sdd_.*/", "color": "#EF843C" }, { "alias": "/.*sde_.*/", "color": "#E24D42" }, { "alias": "/.*sda1.*/", "color": "#584477" }, { "alias": "/.*sda2_.*/", "color": "#BA43A9" }, { "alias": "/.*sda3_.*/", "color": "#F4D598" }, { "alias": "/.*sdb1.*/", "color": "#0A50A1" }, { "alias": "/.*sdb2.*/", "color": "#BF1B00" }, { "alias": "/.*sdb3.*/", "color": "#E0752D" }, { "alias": "/.*sdc1.*/", "color": "#962D82" }, { "alias": "/.*sdc2.*/", "color": "#614D93" }, { "alias": "/.*sdc3.*/", "color": "#9AC48A" }, { "alias": "/.*sdd1.*/", "color": "#65C5DB" }, { "alias": "/.*sdd2.*/", "color": "#F9934E" }, { "alias": "/.*sdd3.*/", "color": "#EA6460" }, { "alias": "/.*sde1.*/", "color": "#E0F9D7" }, { "alias": "/.*sdd2.*/", "color": "#FCEACA" }, { "alias": "/.*sde3.*/", "color": "#F9E2D2" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_disk_io_time_seconds_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "intervalFactor": 4, "legendFormat": "{{device}} - IO time", "refId": "A", "step": 8 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Time Spent Doing I/Os", "tooltip": { "shared": false, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "s", "label": "Time", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 39 }, "hiddenSeries": false, "id": 34, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": true, "max": true, "min": true, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*sda_.*/", "color": "#7EB26D" }, { "alias": "/.*sdb_.*/", "color": "#EAB839" }, { "alias": "/.*sdc_.*/", "color": "#6ED0E0" }, { "alias": "/.*sdd_.*/", "color": "#EF843C" }, { "alias": "/.*sde_.*/", "color": "#E24D42" }, { "alias": "/.*sda1.*/", "color": "#584477" }, { "alias": "/.*sda2_.*/", "color": "#BA43A9" }, { "alias": "/.*sda3_.*/", "color": "#F4D598" }, { "alias": "/.*sdb1.*/", "color": "#0A50A1" }, { "alias": "/.*sdb2.*/", "color": "#BF1B00" }, { "alias": "/.*sdb3.*/", "color": "#E0752D" }, { "alias": "/.*sdc1.*/", "color": "#962D82" }, { "alias": "/.*sdc2.*/", "color": "#614D93" }, { "alias": "/.*sdc3.*/", "color": "#9AC48A" }, { "alias": "/.*sdd1.*/", "color": "#65C5DB" }, { "alias": "/.*sdd2.*/", "color": "#F9934E" }, { "alias": "/.*sdd3.*/", "color": "#EA6460" }, { "alias": "/.*sde1.*/", "color": "#E0F9D7" }, { "alias": "/.*sdd2.*/", "color": "#FCEACA" }, { "alias": "/.*sde3.*/", "color": "#F9E2D2" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_disk_io_now{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "intervalFactor": 4, "legendFormat": "{{device}} - IO now", "refId": "A", "step": 8 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Disk IOs Current in Progress", "tooltip": { "shared": false, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "iops", "label": "I/Os", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 39 }, "hiddenSeries": false, "id": 66, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": false, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*sda_.*/", "color": "#7EB26D" }, { "alias": "/.*sdb_.*/", "color": "#EAB839" }, { "alias": "/.*sdc_.*/", "color": "#6ED0E0" }, { "alias": "/.*sdd_.*/", "color": "#EF843C" }, { "alias": "/.*sde_.*/", "color": "#E24D42" }, { "alias": "/.*sda1.*/", "color": "#584477" }, { "alias": "/.*sda2_.*/", "color": "#B7DBAB" }, { "alias": "/.*sda3_.*/", "color": "#F4D598" }, { "alias": "/.*sdb1.*/", "color": "#0A50A1" }, { "alias": "/.*sdb2.*/", "color": "#BF1B00" }, { "alias": "/.*sdb3.*/", "color": "#E0752D" }, { "alias": "/.*sdc1.*/", "color": "#962D82" }, { "alias": "/.*sdc2.*/", "color": "#614D93" }, { "alias": "/.*sdc3.*/", "color": "#9AC48A" }, { "alias": "/.*sdd1.*/", "color": "#65C5DB" }, { "alias": "/.*sdd2.*/", "color": "#F9934E" }, { "alias": "/.*sdd3.*/", "color": "#EA6460" }, { "alias": "/.*sde1.*/", "color": "#E0F9D7" }, { "alias": "/.*sdd2.*/", "color": "#FCEACA" }, { "alias": "/.*sde3.*/", "color": "#F9E2D2" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_textfile_scrape_error{instance=~\"$node:$port\",job=~\"$job\"}", "intervalFactor": 4, "legendFormat": "Textfile scrape error (1 = true)", "refId": "A", "step": 8 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Open Error File", "tooltip": { "shared": false, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Errors", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } } ], "repeat": null, "title": "Storage Disk", "type": "row" }, { "collapsed": true, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 27 }, "id": 271, "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 3, "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 14 }, "hiddenSeries": false, "id": 43, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_filesystem_avail_bytes{instance=~\"$node:$port\",job=~\"$job\",device!~'rootfs'}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "{{mountpoint}} - Available", "metric": "", "refId": "A", "step": 4 }, { "expr": "node_filesystem_free_bytes{instance=~\"$node:$port\",job=~\"$job\",device!~'rootfs'}", "format": "time_series", "hide": true, "intervalFactor": 2, "legendFormat": "{{mountpoint}} - Free", "refId": "B", "step": 2 }, { "expr": "node_filesystem_size_bytes{instance=~\"$node:$port\",job=~\"$job\",device!~'rootfs'}", "format": "time_series", "hide": true, "intervalFactor": 2, "legendFormat": "{{mountpoint}} - Size", "refId": "D", "step": 2 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Filesystem space available", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 14 }, "hiddenSeries": false, "id": 41, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_filesystem_files_free{instance=~\"$node:$port\",job=~\"$job\",device!~'rootfs'}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "{{mountpoint}} - Free file nodes", "refId": "B", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "File Nodes Free", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "File Nodes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 24 }, "hiddenSeries": false, "id": 28, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_filefd_maximum{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 4, "legendFormat": "Max open files", "refId": "A", "step": 8 }, { "expr": "node_filefd_allocated{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Open files", "refId": "B", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "File Descriptor", "tooltip": { "shared": false, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Files", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 24 }, "hiddenSeries": false, "id": 219, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_filesystem_files{instance=~\"$node:$port\",job=~\"$job\",device!~'rootfs'}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "{{mountpoint}} - File nodes total", "refId": "A", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "File Nodes Size", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "File Nodes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "/ ReadOnly": "#890F02" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": null, "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 34 }, "hiddenSeries": false, "id": 44, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": true, "hideZero": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 6, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "node_filesystem_readonly{instance=~\"$node:$port\",job=~\"$job\",device!~'rootfs'}", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{mountpoint}} - ReadOnly", "refId": "C", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Filesystem in ReadOnly", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Read Only", "logBase": 1, "max": "1", "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } } ], "repeat": null, "title": "Storage Filesystem", "type": "row" }, { "collapsed": true, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 28 }, "id": 272, "panels": [ { "aliasColors": { "receive_packets_eth0": "#7EB26D", "receive_packets_lo": "#E24D42", "transmit_packets_eth0": "#7EB26D", "transmit_packets_lo": "#E24D42" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 15 }, "hiddenSeries": false, "id": 60, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Trans.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_network_receive_packets_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Receive", "refId": "O", "step": 4 }, { "expr": "irate(node_network_transmit_packets_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Transmit", "refId": "P", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Network Traffic by Packets", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "pps", "label": "Packets out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 15 }, "hiddenSeries": false, "id": 142, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Trans.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_network_receive_errs_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Receive errors", "refId": "E", "step": 4 }, { "expr": "irate(node_network_transmit_errs_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Rransmit errors", "refId": "F", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Network Traffic Errors", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "pps", "label": "Packets out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 25 }, "hiddenSeries": false, "id": 143, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Trans.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_network_receive_drop_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Receive drop", "refId": "G", "step": 4 }, { "expr": "irate(node_network_transmit_drop_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Transmit drop", "refId": "H", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Network Traffic Drop", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "pps", "label": "Packets out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 25 }, "hiddenSeries": false, "id": 141, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Trans.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_network_receive_compressed_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Receive compressed", "refId": "C", "step": 4 }, { "expr": "irate(node_network_transmit_compressed_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Transmit compressed", "refId": "D", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Network Traffic Compressed", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "pps", "label": "Packets out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 35 }, "hiddenSeries": false, "id": 146, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Trans.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_network_receive_multicast_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Receive multicast", "refId": "M", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Network Traffic Multicast", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "pps", "label": "Packets out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 35 }, "hiddenSeries": false, "id": 144, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Trans.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_network_receive_fifo_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Receive fifo", "refId": "I", "step": 4 }, { "expr": "irate(node_network_transmit_fifo_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Transmit fifo", "refId": "J", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Network Traffic Fifo", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "pps", "label": "Packets out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 45 }, "hiddenSeries": false, "id": 145, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Trans.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_network_receive_frame_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "{{device}} - Receive frame", "refId": "K", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Network Traffic Frame", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "pps", "label": "Packets out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 45 }, "hiddenSeries": false, "id": 231, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_network_transmit_carrier_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Statistic transmit_carrier", "refId": "C", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Network Traffic Carrier", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 55 }, "hiddenSeries": false, "id": 232, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Trans.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_network_transmit_colls_total{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{device}} - Transmit colls", "refId": "C", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Network Traffic Colls", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 55 }, "hiddenSeries": false, "id": 61, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "NF conntrack limit", "color": "#890F02", "fill": 0 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_nf_conntrack_entries{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "NF conntrack entries", "refId": "O", "step": 4 }, { "expr": "node_nf_conntrack_entries_limit{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "NF conntrack limit", "refId": "P", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "NF Contrack", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Entries", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 65 }, "hiddenSeries": false, "id": 230, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_arp_entries{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{ device }} - ARP entries", "refId": "O", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "ARP Entries", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Entries", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 65 }, "hiddenSeries": false, "id": 288, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 1, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_network_mtu_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{ device }} - Bytes", "refId": "O", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "MTU", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "decimals": 0, "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 75 }, "hiddenSeries": false, "id": 280, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 1, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_network_speed_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{ device }} - Speed", "refId": "O", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Speed", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "decimals": 0, "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 75 }, "hiddenSeries": false, "id": 289, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 1, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_network_transmit_queue_length{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{ device }} - Interface transmit queue length", "refId": "O", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Queue Length", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "decimals": 0, "format": "none", "label": "Packets", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 85 }, "hiddenSeries": false, "id": 290, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_network_up{operstate=\"up\",instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "{{interface}} - Operational state UP", "refId": "C", "step": 4 }, { "expr": "node_network_carrier{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "instant": false, "legendFormat": "{{device}} - Physical link state", "refId": "A" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Network Operational Status", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } } ], "repeat": null, "title": "Network Traffic", "type": "row" }, { "collapsed": true, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 29 }, "id": 273, "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 16 }, "hiddenSeries": false, "id": 63, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_sockstat_TCP_alloc{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "TCP_alloc - Allocated sockets", "refId": "D", "step": 240 }, { "expr": "node_sockstat_TCP_inuse{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "TCP_inuse - Tcp sockets currently in use", "refId": "E", "step": 240 }, { "expr": "node_sockstat_TCP_mem{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "TCP_mem - Used memory for tcp", "refId": "F", "step": 240 }, { "expr": "node_sockstat_TCP_orphan{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "TCP_orphan - Orphan sockets", "refId": "H", "step": 240 }, { "expr": "node_sockstat_TCP_tw{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "TCP_tw - Sockets wating close", "refId": "I", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Sockstat TCP", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 16 }, "hiddenSeries": false, "id": 124, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_sockstat_UDPLITE_inuse{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "UDPLITE_inuse - Udplite sockets currently in use", "refId": "J", "step": 240 }, { "expr": "node_sockstat_UDP_inuse{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "UDP_inuse - Udp sockets currently in use", "refId": "K", "step": 240 }, { "expr": "node_sockstat_UDP_mem{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "UDP_mem - Used memory for udp", "refId": "L", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Sockstat UDP", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 26 }, "hiddenSeries": false, "id": 126, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_sockstat_sockets_used{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "Sockets_used - Sockets currently in use", "refId": "N", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Sockstat Used", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Sockets", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 26 }, "hiddenSeries": false, "id": 220, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_sockstat_TCP_mem_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "TCP_mem_bytes - ", "refId": "G", "step": 240 }, { "expr": "node_sockstat_UDP_mem_bytes{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "UDP_mem_bytes - ", "refId": "A", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Sockstat Memory Size", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "Bytes", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 36 }, "hiddenSeries": false, "id": 125, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_sockstat_FRAG_inuse{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "FRAG_inuse - Frag sockets currently in use", "refId": "A", "step": 240 }, { "expr": "node_sockstat_FRAG_memory{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "FRAG_memory - Used memory for frag", "refId": "B", "step": 240 }, { "expr": "node_sockstat_RAW_inuse{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "RAW_inuse - Raw sockets currently in use", "refId": "C", "step": 240 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Sockstat FRAG / RAW", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Sockets", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } } ], "repeat": null, "title": "Network Sockstat", "type": "row" }, { "collapsed": true, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 30 }, "id": 274, "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 17 }, "height": "", "hiddenSeries": false, "id": 221, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 12, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Out.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_netstat_IpExt_InOctets{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "InOctets - Received octets", "refId": "K", "step": 4 }, { "expr": "irate(node_netstat_IpExt_OutOctets{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "OutOctets - Sent octets", "refId": "Q", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Netstat IP In / Out Octets", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Octects out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 17 }, "height": "", "hiddenSeries": false, "id": 81, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sideWidth": 300, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_netstat_Ip_Forwarding{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "Forwarding - IP forwarding", "refId": "D", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Netstat IP Forwarding", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Datagrams", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": null, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 27 }, "height": "", "hiddenSeries": false, "id": 115, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 12, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Out.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_netstat_Icmp_InMsgs{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "InMsgs - Messages which the entity received. Note that this counter includes all those counted by icmpInErrors", "refId": "J", "step": 4 }, { "expr": "irate(node_netstat_Icmp_OutMsgs{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "OutMsgs - Messages which this entity attempted to send. Note that this counter includes all those counted by icmpOutErrors", "refId": "W", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "ICMP In / Out", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Messages out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": null, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 27 }, "height": "", "hiddenSeries": false, "id": 50, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 12, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Out.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_netstat_Icmp_InErrors{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "InErrors - Messages which the entity received but determined as having ICMP-specific errors (bad ICMP checksums, bad length, etc.)", "refId": "I", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "ICMP Errors", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Messages out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": null, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 37 }, "height": "", "hiddenSeries": false, "id": 55, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 12, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Out.*/", "transform": "negative-Y" }, { "alias": "/.*Snd.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_netstat_Udp_InDatagrams{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "InDatagrams - Datagrams received", "refId": "B", "step": 4 }, { "expr": "irate(node_netstat_Udp_OutDatagrams{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "OutDatagrams - Datagrams sent", "refId": "E", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "UDP In / Out", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Datagrams out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 37 }, "height": "", "hiddenSeries": false, "id": 109, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 12, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_netstat_Udp_InErrors{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "InErrors - UDP Datagrams that could not be delivered to an application", "refId": "C", "step": 4 }, { "expr": "irate(node_netstat_Udp_NoPorts{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "NoPorts - UDP Datagrams received on a port with no listener", "refId": "B", "step": 4 }, { "expr": "irate(node_netstat_UdpLite_InErrors{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "legendFormat": "InErrors Lite - UDPLite Datagrams that could not be delivered to an application", "refId": "A" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "UDP Errors", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Datagrams out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": null, "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 47 }, "height": "", "hiddenSeries": false, "id": 299, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 12, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Out.*/", "transform": "negative-Y" }, { "alias": "/.*Snd.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_netstat_Tcp_InSegs{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "InSegs - Segments received, including those received in error. This count includes segments received on currently established connections", "refId": "B", "step": 4 }, { "expr": "irate(node_netstat_Tcp_OutSegs{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "OutSegs - Segments sent, including those on current connections but excluding those containing only retransmitted octets", "refId": "E", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "TCP In / Out", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Datagrams out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 47 }, "height": "", "hiddenSeries": false, "id": 104, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 12, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_netstat_TcpExt_ListenOverflows{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "ListenOverflows - Times the listen queue of a socket overflowed", "refId": "I", "step": 4 }, { "expr": "irate(node_netstat_TcpExt_ListenDrops{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "ListenDrops - SYNs to LISTEN sockets ignored", "refId": "A", "step": 4 }, { "expr": "irate(node_netstat_TcpExt_TCPSynRetrans{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "TCPSynRetrans - SYN-SYN/ACK retransmits to break down retransmissions in SYN, fast/timeout retransmits", "refId": "B", "step": 4 }, { "expr": "irate(node_netstat_Tcp_RetransSegs{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "legendFormat": "RetransSegs - Segments retransmitted - that is, the number of TCP segments transmitted containing one or more previously transmitted octets", "refId": "C" }, { "expr": "irate(node_netstat_Tcp_InErrs{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "legendFormat": "InErrs - Segments received in error (e.g., bad TCP checksums)", "refId": "D" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "TCP Errors", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 57 }, "height": "", "hiddenSeries": false, "id": 85, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 12, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*MaxConn *./", "color": "#890F02", "fill": 0 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_netstat_Tcp_CurrEstab{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "CurrEstab - TCP connections for which the current state is either ESTABLISHED or CLOSE- WAIT", "refId": "C", "step": 4 }, { "expr": "node_netstat_Tcp_MaxConn{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "MaxConn - Limit on the total number of TCP connections the entity can support (Dinamic is \"-1\")", "refId": "H", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "TCP Connections", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Connections", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 57 }, "height": "", "hiddenSeries": false, "id": 91, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 12, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "/.*Sent.*/", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_netstat_TcpExt_SyncookiesFailed{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "SyncookiesFailed - Invalid SYN cookies received", "refId": "R", "step": 4 }, { "expr": "irate(node_netstat_TcpExt_SyncookiesRecv{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "SyncookiesRecv - SYN cookies received", "refId": "S", "step": 4 }, { "expr": "irate(node_netstat_TcpExt_SyncookiesSent{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "SyncookiesSent - SYN cookies sent", "refId": "T", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "TCP SynCookie", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter out (-) / in (+)", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 67 }, "height": "", "hiddenSeries": false, "id": 82, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideZero": false, "max": true, "min": true, "rightSide": false, "show": true, "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "maxPerRow": 12, "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "irate(node_netstat_Tcp_ActiveOpens{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "ActiveOpens - TCP connections that have made a direct transition to the SYN-SENT state from the CLOSED state", "refId": "A", "step": 4 }, { "expr": "irate(node_netstat_Tcp_PassiveOpens{instance=~\"$node:$port\",job=~\"$job\"}[5m])", "format": "time_series", "intervalFactor": 2, "legendFormat": "PassiveOpens - TCP connections that have made a direct transition to the SYN-RCVD state from the LISTEN state", "refId": "K", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "TCP Direct Transition", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Connections", "logBase": 1, "max": null, "min": "0", "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } } ], "repeat": null, "title": "Network Netstat", "type": "row" }, { "collapsed": true, "datasource": "Prometheus", "gridPos": { "h": 1, "w": 24, "x": 0, "y": 31 }, "id": 279, "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 0, "y": 24 }, "hiddenSeries": false, "id": 40, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "node_scrape_collector_duration_seconds{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "{{collector}} - Scrape duration", "refId": "A", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Node Exporter Scrape Time", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "s", "label": "Seconds", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "description": "", "fill": 2, "fillGradient": 0, "gridPos": { "h": 10, "w": 12, "x": 12, "y": 24 }, "hiddenSeries": false, "id": 157, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "node_scrape_collector_success{instance=~\"$node:$port\",job=~\"$job\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "{{collector}} - Scrape success", "refId": "A", "step": 4 } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Node Exporter Scrape Success", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "Counter", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } } ], "repeat": null, "title": "Node Exporter", "type": "row" } ], "refresh": false, "schemaVersion": 22, "style": "dark", "tags": [], "templating": { "list": [ { "current": { "selected": false, "text": "Prometheus", "value": "Prometheus" }, "hide": 0, "includeAll": false, "label": "datasource", "multi": false, "name": "DS_PROMETHEUS", "options": [], "query": "prometheus", "refresh": 1, "regex": "", "skipUrlSync": false, "type": "datasource" }, { "allValue": null, "current": { "text": "kubernetes-service-endpoints", "value": "kubernetes-service-endpoints" }, "datasource": "Prometheus", "definition": "", "hide": 0, "includeAll": false, "index": -1, "label": "Job", "multi": false, "name": "job", "options": [], "query": "label_values(node_uname_info, job)", "refresh": 1, "regex": "", "skipUrlSync": false, "sort": 1, "tagValuesQuery": "", "tags": [], "tagsQuery": "", "type": "query", "useTags": false }, { "allValue": null, "current": { "text": "ip-10-0-3-12.ec2.internal", "value": "ip-10-0-3-12.ec2.internal" }, "datasource": "Prometheus", "definition": "", "hide": 0, "includeAll": false, "index": -1, "label": "Host:", "multi": false, "name": "name", "options": [], "query": "label_values(node_uname_info{job=~\"$job\"}, nodename)", "refresh": 1, "regex": "", "skipUrlSync": false, "sort": 1, "tagValuesQuery": "", "tags": [], "tagsQuery": "", "type": "query", "useTags": false }, { "allValue": null, "current": { "text": "10.0.3.12", "value": "10.0.3.12" }, "datasource": "Prometheus", "definition": "", "hide": 2, "includeAll": false, "index": -1, "label": "Host:", "multi": false, "name": "node", "options": [], "query": "label_values(node_uname_info{nodename=\"$name\"}, instance)", "refresh": 1, "regex": "/([^:]+):.*/", "skipUrlSync": false, "sort": 1, "tagValuesQuery": "", "tags": [], "tagsQuery": "", "type": "query", "useTags": false }, { "allValue": null, "current": { "text": "9100", "value": "9100" }, "datasource": "Prometheus", "definition": "", "hide": 0, "includeAll": false, "index": -1, "label": "Port", "multi": false, "name": "port", "options": [], "query": "label_values(node_uname_info{instance=~\"$node:(.*)\"}, instance)", "refresh": 1, "regex": "/[^:]+:(.*)/", "skipUrlSync": false, "sort": 3, "tagValuesQuery": "", "tags": [], "tagsQuery": "", "type": "query", "useTags": false } ] }, "time": { "from": "now-24h", "to": "now" }, "timepicker": { "refresh_intervals": [ "5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d" ], "time_options": [ "5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d" ] }, "timezone": "browser", "title": "Node Exporter Full", "uid": "rYdddlPWk", "variables": { "list": [] }, "version": 1 }
  kube-dash.json: |
    { "__inputs": [ { "name": "DS_PROMETHEUS", "label": "Prometheus", "description": "", "type": "datasource", "pluginId": "prometheus", "pluginName": "Prometheus" } ], "__requires": [ { "type": "grafana", "id": "grafana", "name": "Grafana", "version": "5.3.2" }, { "type": "panel", "id": "graph", "name": "Graph", "version": "5.0.0" }, { "type": "datasource", "id": "prometheus", "name": "Prometheus", "version": "5.0.0" }, { "type": "panel", "id": "singlestat", "name": "Singlestat", "version": "5.0.0" } ], "annotations": { "list": [ { "builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard" } ] }, "description": "This dashboard provides cluster admins with the ability to monitor nodes and identify workload bottlenecks. It can be deployed with PSPs enabled using the following helm chart - https://github.com/pivotal-cf/charts-grafana", "editable": false, "gnetId": 10000, "graphTooltip": 0, "id": null, "iteration": 1554239573808, "links": [], "panels": [ { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }, "id": 34, "panels": [], "repeat": null, "title": "Summary", "type": "row" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": true, "colors": [ "rgba(50, 172, 45, 0.97)", "rgba(237, 129, 40, 0.89)", "rgba(245, 54, 54, 0.9)" ], "datasource": "Prometheus", "editable": true, "error": false, "format": "percent", "gauge": { "maxValue": 100, "minValue": 0, "show": true, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 5, "w": 8, "x": 0, "y": 1 }, "height": "180px", "id": 4, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "connected", "nullText": null, "postfix": "", "postfixFontSize": "50%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "sum (container_memory_working_set_bytes{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}) / sum (machine_memory_bytes{kubernetes_io_hostname=~\"^$Node$\"}) * 100", "format": "time_series", "interval": "10s", "intervalFactor": 1, "refId": "A", "step": 10 } ], "thresholds": "65, 90", "title": "Cluster memory usage", "transparent": false, "type": "singlestat", "valueFontSize": "80%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": true, "colors": [ "rgba(50, 172, 45, 0.97)", "rgba(237, 129, 40, 0.89)", "rgba(245, 54, 54, 0.9)" ], "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "format": "percent", "gauge": { "maxValue": 100, "minValue": 0, "show": true, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 5, "w": 8, "x": 8, "y": 1 }, "height": "180px", "id": 6, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "connected", "nullText": null, "postfix": "", "postfixFontSize": "50%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "sum (rate (container_cpu_usage_seconds_total{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[$interval])) / sum (machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"}) * 100", "format": "time_series", "interval": "10s", "intervalFactor": 1, "legendFormat": "", "refId": "A", "step": 10 } ], "thresholds": "65, 90", "title": "Cluster CPU usage ($interval avg)", "type": "singlestat", "valueFontSize": "80%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": true, "colors": [ "rgba(50, 172, 45, 0.97)", "rgba(237, 129, 40, 0.89)", "rgba(245, 54, 54, 0.9)" ], "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "format": "percent", "gauge": { "maxValue": 100, "minValue": 0, "show": true, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 5, "w": 8, "x": 16, "y": 1 }, "height": "180px", "id": 7, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "connected", "nullText": null, "postfix": "", "postfixFontSize": "50%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "sum (container_fs_usage_bytes{id=\"/\"}) / sum (container_fs_limit_bytes{id=\"/\"}) * 100", "format": "time_series", "interval": "10s", "intervalFactor": 1, "legendFormat": "", "metric": "", "refId": "A", "step": 10 } ], "thresholds": "65, 90", "title": "Cluster filesystem usage", "type": "singlestat", "valueFontSize": "80%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(50, 172, 45, 0.97)", "rgba(237, 129, 40, 0.89)", "rgba(245, 54, 54, 0.9)" ], "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "format": "bytes", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 3, "w": 4, "x": 0, "y": 6 }, "height": "1px", "id": 9, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "connected", "nullText": null, "postfix": "", "postfixFontSize": "20%", "prefix": "", "prefixFontSize": "20%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "sum (container_memory_working_set_bytes{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"})", "format": "time_series", "interval": "10s", "intervalFactor": 1, "refId": "A", "step": 10 } ], "thresholds": "", "title": "Used", "type": "singlestat", "valueFontSize": "50%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(50, 172, 45, 0.97)", "rgba(237, 129, 40, 0.89)", "rgba(245, 54, 54, 0.9)" ], "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "format": "bytes", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 3, "w": 4, "x": 4, "y": 6 }, "height": "1px", "id": 10, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "connected", "nullText": null, "postfix": "", "postfixFontSize": "50%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "sum (machine_memory_bytes{kubernetes_io_hostname=~\"^$Node$\"})", "format": "time_series", "interval": "10s", "intervalFactor": 1, "refId": "A", "step": 10 } ], "thresholds": "", "title": "Total", "type": "singlestat", "valueFontSize": "50%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(50, 172, 45, 0.97)", "rgba(237, 129, 40, 0.89)", "rgba(245, 54, 54, 0.9)" ], "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "format": "none", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 3, "w": 4, "x": 8, "y": 6 }, "height": "1px", "id": 11, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "connected", "nullText": null, "postfix": " cores", "postfixFontSize": "30%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "sum (rate (container_cpu_usage_seconds_total{id=\"/\",kubernetes_io_hostname=~\"^$Node$\"}[$interval]))", "format": "time_series", "interval": "10s", "intervalFactor": 1, "legendFormat": "", "refId": "A", "step": 10 } ], "thresholds": "", "title": "Used", "type": "singlestat", "valueFontSize": "50%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(50, 172, 45, 0.97)", "rgba(237, 129, 40, 0.89)", "rgba(245, 54, 54, 0.9)" ], "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "format": "none", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 3, "w": 4, "x": 12, "y": 6 }, "height": "1px", "id": 12, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "connected", "nullText": null, "postfix": " cores", "postfixFontSize": "30%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "sum (machine_cpu_cores{kubernetes_io_hostname=~\"^$Node$\"})", "format": "time_series", "interval": "10s", "intervalFactor": 1, "refId": "A", "step": 10 } ], "thresholds": "", "title": "Total", "type": "singlestat", "valueFontSize": "50%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(50, 172, 45, 0.97)", "rgba(237, 129, 40, 0.89)", "rgba(245, 54, 54, 0.9)" ], "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "format": "bytes", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 3, "w": 4, "x": 16, "y": 6 }, "height": "1px", "id": 13, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "connected", "nullText": null, "postfix": "", "postfixFontSize": "50%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "sum (container_fs_usage_bytes{id=\"/\"})", "format": "time_series", "interval": "10s", "intervalFactor": 1, "legendFormat": "", "refId": "A", "step": 10 } ], "thresholds": "", "title": "Used", "type": "singlestat", "valueFontSize": "50%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(50, 172, 45, 0.97)", "rgba(237, 129, 40, 0.89)", "rgba(245, 54, 54, 0.9)" ], "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "format": "bytes", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 3, "w": 4, "x": 20, "y": 6 }, "height": "1px", "id": 14, "interval": null, "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "connected", "nullText": null, "postfix": "", "postfixFontSize": "50%", "prefix": "", "prefixFontSize": "50%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "expr": "sum (container_fs_limit_bytes{id=\"/\"})", "format": "time_series", "interval": "10s", "intervalFactor": 1, "legendFormat": "", "refId": "A", "step": 10 } ], "thresholds": "", "title": "Total", "type": "singlestat", "valueFontSize": "50%", "valueMaps": [ { "op": "=", "text": "N/A", "value": "null" } ], "valueName": "current" }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 9 }, "id": 35, "panels": [], "repeat": null, "title": "Memory", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "fill": 0, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 10 }, "id": 25, "legend": { "alignAsTable": true, "avg": true, "current": true, "hideEmpty": false, "max": false, "min": false, "rightSide": true, "show": true, "sideWidth": 200, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "connected", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "sum (container_memory_working_set_bytes{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}) by (pod_name)", "format": "time_series", "interval": "10s", "intervalFactor": 1, "legendFormat": "{{ pod_name }}", "metric": "container_memory_usage:sort_desc", "refId": "A", "step": 10 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "Pods memory usage", "tooltip": { "msResolution": false, "shared": true, "sort": 2, "value_type": "cumulative" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 17 }, "id": 37, "panels": [], "title": "CPU", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 3, "editable": true, "error": false, "fill": 0, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 18 }, "height": "", "id": 17, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": false, "min": false, "rightSide": true, "show": true, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "connected", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "sum (rate (container_cpu_usage_seconds_total{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[$interval])) by (pod_name)", "format": "time_series", "interval": "10s", "intervalFactor": 1, "legendFormat": "{{ pod_name }}", "metric": "container_cpu", "refId": "A", "step": 10 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "Pods CPU usage ($interval avg)", "tooltip": { "msResolution": true, "shared": true, "sort": 2, "value_type": "cumulative" }, "transparent": false, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "none", "label": "cores", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 25 }, "id": 33, "panels": [], "repeat": null, "title": "Network I/O", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "fill": 1, "grid": {}, "gridPos": { "h": 5, "w": 24, "x": 0, "y": 26 }, "height": "200px", "id": 32, "legend": { "alignAsTable": false, "avg": true, "current": true, "max": false, "min": false, "rightSide": false, "show": false, "sideWidth": 200, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "sum (rate (container_network_receive_bytes_total{kubernetes_io_hostname=~\"^$Node$\"}[$interval]))", "format": "time_series", "interval": "10s", "intervalFactor": 1, "legendFormat": "Received", "metric": "network", "refId": "A", "step": 10 }, { "expr": "- sum (rate (container_network_transmit_bytes_total{kubernetes_io_hostname=~\"^$Node$\"}[$interval]))", "format": "time_series", "interval": "10s", "intervalFactor": 1, "legendFormat": "Sent", "metric": "network", "refId": "B", "step": 10 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "Network I/O pressure", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "cumulative" }, "transparent": false, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "Bps", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "Bps", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "fill": 1, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 31 }, "id": 16, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": false, "min": false, "rightSide": true, "show": true, "sideWidth": 200, "sort": "current", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "connected", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "sum (rate (container_network_receive_bytes_total{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[$interval])) by (pod_name)", "format": "time_series", "interval": "10s", "intervalFactor": 1, "legendFormat": "-> {{ pod_name }}", "metric": "network", "refId": "A", "step": 10 }, { "expr": "- sum (rate (container_network_transmit_bytes_total{image!=\"\",name=~\"^k8s_.*\",kubernetes_io_hostname=~\"^$Node$\"}[$interval])) by (pod_name)", "format": "time_series", "interval": "10s", "intervalFactor": 1, "legendFormat": "<- {{ pod_name }}", "metric": "network", "refId": "B", "step": 10 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "Pods network I/O ($interval avg)", "tooltip": { "msResolution": false, "shared": true, "sort": 2, "value_type": "cumulative" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "Bps", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": false } ], "yaxis": { "align": false, "alignLevel": null } } ], "refresh": "10s", "schemaVersion": 16, "style": "dark", "tags": [ "kubernetes" ], "templating": { "list": [ { "auto": true, "auto_count": 20, "auto_min": "2m", "current": { "text": "auto", "value": "$__auto_interval_interval" }, "hide": 2, "label": null, "name": "interval", "options": [ { "selected": true, "text": "auto", "value": "$__auto_interval_interval" }, { "selected": false, "text": "1m", "value": "1m" }, { "selected": false, "text": "10m", "value": "10m" }, { "selected": false, "text": "30m", "value": "30m" }, { "selected": false, "text": "1h", "value": "1h" }, { "selected": false, "text": "6h", "value": "6h" }, { "selected": false, "text": "12h", "value": "12h" }, { "selected": false, "text": "1d", "value": "1d" }, { "selected": false, "text": "7d", "value": "7d" }, { "selected": false, "text": "14d", "value": "14d" }, { "selected": false, "text": "30d", "value": "30d" } ], "query": "1m,10m,30m,1h,6h,12h,1d,7d,14d,30d", "refresh": 2, "skipUrlSync": false, "type": "interval" }, { "current": { "text": "default", "value": "default" }, "hide": 0, "label": null, "name": "datasource", "options": [], "query": "prometheus", "refresh": 1, "regex": "", "skipUrlSync": false, "type": "datasource" }, { "allValue": ".*", "current": {}, "datasource": "Prometheus", "hide": 0, "includeAll": true, "label": null, "multi": false, "name": "Node", "options": [], "query": "label_values(kubernetes_io_hostname)", "refresh": 1, "regex": "", "skipUrlSync": false, "sort": 0, "tagValuesQuery": "", "tags": [], "tagsQuery": "", "type": "query", "useTags": false } ] }, "time": { "from": "now-15m", "to": "now" }, "timepicker": { "refresh_intervals": [ "5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d" ], "time_options": [ "5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d" ] }, "timezone": "browser", "title": "Cluster Monitoring for Kubernetes", "uid": "JABGX_-mz", "version": 1 }
  mysql-overview.json: |
    { "__inputs": [ { "name": "DS_PROMETHEUS", "label": "prometheus", "description": "", "type": "datasource", "pluginId": "prometheus", "pluginName": "Prometheus" } ], "__requires": [ { "type": "grafana", "id": "grafana", "name": "Grafana", "version": "5.2.1" }, { "type": "panel", "id": "graph", "name": "Graph", "version": "5.0.0" }, { "type": "datasource", "id": "prometheus", "name": "Prometheus", "version": "5.0.0" }, { "type": "panel", "id": "singlestat", "name": "Singlestat", "version": "5.0.0" } ], "annotations": { "list": [ { "builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": false, "iconColor": "#e0752d", "limit": 100, "name": "PMM Annotations", "showIn": 0, "tags": [ "pmm_annotation" ], "type": "tags" } ] }, "editable": true, "gnetId": 7362, "graphTooltip": 1, "id": null, "iteration": 1529322446915, "links": [ { "icon": "dashboard", "includeVars": true, "keepTime": true, "tags": [ "QAN" ], "targetBlank": false, "title": "Query Analytics", "type": "link", "url": "/graph/dashboard/db/_pmm-query-analytics" }, { "asDropdown": true, "includeVars": true, "keepTime": true, "tags": [ "OS" ], "targetBlank": false, "title": "OS", "type": "dashboards" }, { "asDropdown": true, "includeVars": true, "keepTime": true, "tags": [ "MySQL" ], "targetBlank": false, "title": "MySQL", "type": "dashboards" }, { "asDropdown": true, "includeVars": true, "keepTime": true, "tags": [ "MongoDB" ], "targetBlank": false, "title": "MongoDB", "type": "dashboards" }, { "asDropdown": true, "includeVars": true, "keepTime": true, "tags": [ "HA" ], "targetBlank": false, "title": "HA", "type": "dashboards" }, { "asDropdown": true, "includeVars": true, "keepTime": true, "tags": [ "Cloud" ], "targetBlank": false, "title": "Cloud", "type": "dashboards" }, { "asDropdown": true, "includeVars": true, "keepTime": true, "tags": [ "Insight" ], "targetBlank": false, "title": "Insight", "type": "dashboards" }, { "asDropdown": true, "includeVars": true, "keepTime": true, "tags": [ "PMM" ], "targetBlank": false, "title": "PMM", "type": "dashboards" } ], "panels": [ { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }, "id": 382, "panels": [], "repeat": null, "title": "", "type": "row" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": true, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "datasource": "Prometheus", "decimals": 1, "description": "**MySQL Uptime**\n\nThe amount of time since the last restart of the MySQL server process.", "editable": true, "error": false, "format": "s", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 4, "w": 6, "x": 0, "y": 1 }, "height": "125px", "id": 12, "interval": "$interval", "links": [], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "connected", "nullText": null, "postfix": "s", "postfixFontSize": "80%", "prefix": "", "prefixFontSize": "80%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "calculatedInterval": "10m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_status_uptime{instance=\"$host\"}", "format": "time_series", "interval": "5m", "intervalFactor": 1, "legendFormat": "", "metric": "", "refId": "A", "step": 300 } ], "thresholds": "300,3600", "title": "MySQL Uptime", "transparent": false, "type": "singlestat", "valueFontSize": "80%", "valueMaps": [], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "datasource": "Prometheus", "decimals": 2, "description": "**Current QPS**\n\nBased on the queries reported by MySQL's ``SHOW STATUS`` command, it is the number of statements executed by the server within the last second. This variable includes statements executed within stored programs, unlike the Questions variable. It does not count \n``COM_PING`` or ``COM_STATISTICS`` commands.", "editable": true, "error": false, "format": "short", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 4, "w": 6, "x": 6, "y": 1 }, "height": "125px", "id": 13, "interval": "$interval", "links": [ { "targetBlank": true, "title": "MySQL Server Status Variables", "type": "absolute", "url": "https://dev.mysql.com/doc/refman/5.7/en/server-status-variables.html#statvar_Queries" } ], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "connected", "nullText": null, "postfix": "", "postfixFontSize": "50%", "prefix": "", "prefixFontSize": "80%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": true }, "tableColumn": "", "targets": [ { "calculatedInterval": "10m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_queries{instance=\"$host\"}[$interval]) or irate(mysql_global_status_queries{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "", "metric": "", "refId": "A", "step": 20 } ], "thresholds": "35,75", "title": "Current QPS", "transparent": false, "type": "singlestat", "valueFontSize": "80%", "valueMaps": [], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": false, "colors": [ "rgba(50, 172, 45, 0.97)", "rgba(237, 129, 40, 0.89)", "rgba(245, 54, 54, 0.9)" ], "datasource": "Prometheus", "decimals": 0, "description": "**InnoDB Buffer Pool Size**\n\nInnoDB maintains a storage area called the buffer pool for caching data and indexes in memory. Knowing how the InnoDB buffer pool works, and taking advantage of it to keep frequently accessed data in memory, is one of the most important aspects of MySQL tuning. The goal is to keep the working set in memory. In most cases, this should be between 60%-90% of available memory on a dedicated database host, but depends on many factors.", "editable": true, "error": false, "format": "bytes", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 4, "w": 6, "x": 12, "y": 1 }, "height": "125px", "id": 51, "interval": "$interval", "links": [ { "targetBlank": true, "title": "Tuning the InnoDB Buffer Pool Size", "type": "absolute", "url": "https://www.percona.com/blog/2015/06/02/80-ram-tune-innodb_buffer_pool_size/" } ], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "connected", "nullText": null, "postfix": "", "postfixFontSize": "50%", "prefix": "", "prefixFontSize": "80%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "show": false }, "tableColumn": "", "targets": [ { "calculatedInterval": "10m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_variables_innodb_buffer_pool_size{instance=\"$host\"}", "format": "time_series", "interval": "5m", "intervalFactor": 1, "legendFormat": "", "metric": "", "refId": "A", "step": 300 } ], "thresholds": "90,95", "title": "InnoDB Buffer Pool Size", "transparent": false, "type": "singlestat", "valueFontSize": "80%", "valueMaps": [], "valueName": "current" }, { "cacheTimeout": null, "colorBackground": false, "colorValue": true, "colors": [ "rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)" ], "datasource": "Prometheus", "decimals": 0, "description": "**InnoDB Buffer Pool Size % of Total RAM**\n\nInnoDB maintains a storage area called the buffer pool for caching data and indexes in memory. Knowing how the InnoDB buffer pool works, and taking advantage of it to keep frequently accessed data in memory, is one of the most important aspects of MySQL tuning. The goal is to keep the working set in memory. In most cases, this should be between 60%-90% of available memory on a dedicated database host, but depends on many factors.", "editable": true, "error": false, "format": "percent", "gauge": { "maxValue": 100, "minValue": 0, "show": false, "thresholdLabels": false, "thresholdMarkers": true }, "gridPos": { "h": 4, "w": 6, "x": 18, "y": 1 }, "height": "125px", "id": 52, "interval": "$interval", "links": [ { "targetBlank": true, "title": "Tuning the InnoDB Buffer Pool Size", "type": "absolute", "url": "https://www.percona.com/blog/2015/06/02/80-ram-tune-innodb_buffer_pool_size/" } ], "mappingType": 1, "mappingTypes": [ { "name": "value to text", "value": 1 }, { "name": "range to text", "value": 2 } ], "maxDataPoints": 100, "nullPointMode": "connected", "nullText": null, "postfix": "", "postfixFontSize": "50%", "prefix": "", "prefixFontSize": "80%", "rangeMaps": [ { "from": "null", "text": "N/A", "to": "null" } ], "repeat": null, "sparkline": { "fillColor": "rgba(31, 118, 189, 0.18)", "full": false, "lineColor": "rgb(31, 120, 193)", "maxValue": 100, "minValue": 0, "show": true }, "tableColumn": "", "targets": [ { "calculatedInterval": "10m", "datasourceErrors": {}, "errors": {}, "expr": "(mysql_global_variables_innodb_buffer_pool_size{instance=\"$host\"} * 100) / on (instance) node_memory_MemTotal_bytes{instance=\"$host\"}", "format": "time_series", "interval": "5m", "intervalFactor": 1, "legendFormat": "", "metric": "", "refId": "A", "step": 300 } ], "thresholds": "40,80", "title": "Buffer Pool Size of Total RAM", "transparent": false, "type": "singlestat", "valueFontSize": "80%", "valueMaps": [], "valueName": "current" }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 5 }, "id": 383, "panels": [], "repeat": null, "title": "Connections", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 0, "description": "**Max Connections** \n\nMax Connections is the maximum permitted number of simultaneous client connections. By default, this is 151. Increasing this value increases the number of file descriptors that mysqld requires. If the required number of descriptors are not available, the server reduces the value of Max Connections.\n\nmysqld actually permits Max Connections + 1 clients to connect. The extra connection is reserved for use by accounts that have the SUPER privilege, such as root.\n\nMax Used Connections is the maximum number of connections that have been in use simultaneously since the server started.\n\nConnections is the number of connection attempts (successful or not) to the MySQL server.", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 0, "y": 6 }, "height": "250px", "id": 92, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [ { "targetBlank": true, "title": "MySQL Server System Variables", "type": "absolute", "url": "https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_max_connections" } ], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "Max Connections", "fill": 0 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "max(max_over_time(mysql_global_status_threads_connected{instance=\"$host\"}[$interval]) or mysql_global_status_threads_connected{instance=\"$host\"} )", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Connections", "metric": "", "refId": "A", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_status_max_used_connections{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Max Used Connections", "metric": "", "refId": "C", "step": 20, "target": "" }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_variables_max_connections{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Max Connections", "metric": "", "refId": "B", "step": 20, "target": "" } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Connections", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "label": "", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**MySQL Active Threads**\n\nThreads Connected is the number of open connections, while Threads Running is the number of threads not sleeping.", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 12, "y": 6 }, "id": 10, "legend": { "alignAsTable": true, "avg": true, "current": true, "max": true, "min": true, "rightSide": false, "show": true, "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "Peak Threads Running", "color": "#E24D42", "lines": false, "pointradius": 1, "points": true }, { "alias": "Peak Threads Connected", "color": "#1F78C1" }, { "alias": "Avg Threads Running", "color": "#EAB839" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "max_over_time(mysql_global_status_threads_connected{instance=\"$host\"}[$interval]) or\nmax_over_time(mysql_global_status_threads_connected{instance=\"$host\"}[5m])", "format": "time_series", "hide": false, "interval": "$interval", "intervalFactor": 1, "legendFormat": "Peak Threads Connected", "metric": "", "refId": "A", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "max_over_time(mysql_global_status_threads_running{instance=\"$host\"}[$interval]) or\nmax_over_time(mysql_global_status_threads_running{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Peak Threads Running", "metric": "", "refId": "B", "step": 20 }, { "expr": "avg_over_time(mysql_global_status_threads_running{instance=\"$host\"}[$interval]) or \navg_over_time(mysql_global_status_threads_running{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Avg Threads Running", "refId": "C", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Client Thread Activity", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [ "total" ] }, "yaxes": [ { "format": "short", "label": "Threads", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "label": "", "logBase": 1, "max": null, "min": 0, "show": false } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 13 }, "id": 384, "panels": [], "repeat": null, "title": "Table Locks", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": null, "description": "**MySQL Questions**\n\nThe number of statements executed by the server. This includes only statements sent to the server by clients and not statements executed within stored programs, unlike the Queries used in the QPS calculation. \n\nThis variable does not count the following commands:\n* ``COM_PING``\n* ``COM_STATISTICS``\n* ``COM_STMT_PREPARE``\n* ``COM_STMT_CLOSE``\n* ``COM_STMT_RESET``", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 0, "y": 14 }, "id": 53, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [ { "targetBlank": true, "title": "MySQL Queries and Questions", "type": "absolute", "url": "https://www.percona.com/blog/2014/05/29/how-mysql-queries-and-questions-are-measured/" } ], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_questions{instance=\"$host\"}[$interval]) or irate(mysql_global_status_questions{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Questions", "metric": "", "refId": "A", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Questions", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**MySQL Thread Cache**\n\nThe thread_cache_size variable sets how many threads the server should cache to reuse. When a client disconnects, the client's threads are put in the cache if the cache is not full. It is autosized in MySQL 5.6.8 and above (capped to 100). Requests for threads are satisfied by reusing threads taken from the cache if possible, and only when the cache is empty is a new thread created.\n\n* *Threads_created*: The number of threads created to handle connections.\n* *Threads_cached*: The number of threads in the thread cache.", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 12, "y": 14 }, "id": 11, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [ { "title": "Tuning information", "type": "absolute", "url": "https://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_thread_cache_size" } ], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "Threads Created", "fill": 0 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_variables_thread_cache_size{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Thread Cache Size", "metric": "", "refId": "B", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_status_threads_cached{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Threads Cached", "metric": "", "refId": "C", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_threads_created{instance=\"$host\"}[$interval]) or irate(mysql_global_status_threads_created{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Threads Created", "metric": "", "refId": "A", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Thread Cache", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "transparent": false, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 21 }, "id": 385, "panels": [], "repeat": null, "title": "Temporary Objects", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 0, "y": 22 }, "id": 22, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_created_tmp_tables{instance=\"$host\"}[$interval]) or irate(mysql_global_status_created_tmp_tables{instance=\"$host\"}[5m])", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Created Tmp Tables", "metric": "", "refId": "A", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_created_tmp_disk_tables{instance=\"$host\"}[$interval]) or irate(mysql_global_status_created_tmp_disk_tables{instance=\"$host\"}[5m])", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Created Tmp Disk Tables", "metric": "", "refId": "B", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_created_tmp_files{instance=\"$host\"}[$interval]) or irate(mysql_global_status_created_tmp_files{instance=\"$host\"}[5m])", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Created Tmp Files", "metric": "", "refId": "C", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Temporary Objects", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**MySQL Select Types**\n\nAs with most relational databases, selecting based on indexes is more efficient than scanning an entire table's data. Here we see the counters for selects not done with indexes.\n\n* ***Select Scan*** is how many queries caused full table scans, in which all the data in the table had to be read and either discarded or returned.\n* ***Select Range*** is how many queries used a range scan, which means MySQL scanned all rows in a given range.\n* ***Select Full Join*** is the number of joins that are not joined on an index, this is usually a huge performance hit.", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 12, "y": 22 }, "height": "250px", "id": 311, "legend": { "alignAsTable": true, "avg": true, "current": false, "hideZero": true, "max": true, "min": true, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_select_full_join{instance=\"$host\"}[$interval]) or irate(mysql_global_status_select_full_join{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Select Full Join", "metric": "", "refId": "A", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_select_full_range_join{instance=\"$host\"}[$interval]) or irate(mysql_global_status_select_full_range_join{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Select Full Range Join", "metric": "", "refId": "B", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_select_range{instance=\"$host\"}[$interval]) or irate(mysql_global_status_select_range{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Select Range", "metric": "", "refId": "C", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_select_range_check{instance=\"$host\"}[$interval]) or irate(mysql_global_status_select_range_check{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Select Range Check", "metric": "", "refId": "D", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_select_scan{instance=\"$host\"}[$interval]) or irate(mysql_global_status_select_scan{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Select Scan", "metric": "", "refId": "E", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Select Types", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 29 }, "id": 386, "panels": [], "repeat": null, "title": "Sorts", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**MySQL Sorts**\n\nDue to a query's structure, order, or other requirements, MySQL sorts the rows before returning them. For example, if a table is ordered 1 to 10 but you want the results reversed, MySQL then has to sort the rows to return 10 to 1.\n\nThis graph also shows when sorts had to scan a whole table or a given range of a table in order to return the results and which could not have been sorted via an index.", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 0, "y": 30 }, "id": 30, "legend": { "alignAsTable": true, "avg": true, "current": false, "hideZero": true, "max": true, "min": true, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_sort_rows{instance=\"$host\"}[$interval]) or irate(mysql_global_status_sort_rows{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Sort Rows", "metric": "", "refId": "A", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_sort_range{instance=\"$host\"}[$interval]) or irate(mysql_global_status_sort_range{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Sort Range", "metric": "", "refId": "B", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_sort_merge_passes{instance=\"$host\"}[$interval]) or irate(mysql_global_status_sort_merge_passes{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Sort Merge Passes", "metric": "", "refId": "C", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_sort_scan{instance=\"$host\"}[$interval]) or irate(mysql_global_status_sort_scan{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Sort Scan", "metric": "", "refId": "D", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Sorts", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**MySQL Slow Queries**\n\nSlow queries are defined as queries being slower than the long_query_time setting. For example, if you have long_query_time set to 3, all queries that take longer than 3 seconds to complete will show on this graph.", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 12, "y": 30 }, "id": 48, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_slow_queries{instance=\"$host\"}[$interval]) or irate(mysql_global_status_slow_queries{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Slow Queries", "metric": "", "refId": "A", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Slow Queries", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "label": "", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 37 }, "id": 387, "panels": [], "repeat": null, "title": "Aborted", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**Aborted Connections**\n\nWhen a given host connects to MySQL and the connection is interrupted in the middle (for example due to bad credentials), MySQL keeps that info in a system table (since 5.6 this table is exposed in performance_schema).\n\nIf the amount of failed requests without a successful connection reaches the value of max_connect_errors, mysqld assumes that something is wrong and blocks the host from further connection.\n\nTo allow connections from that host again, you need to issue the ``FLUSH HOSTS`` statement.", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 0, "y": 38 }, "id": 47, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_aborted_connects{instance=\"$host\"}[$interval]) or irate(mysql_global_status_aborted_connects{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Aborted Connects (attempts)", "metric": "", "refId": "A", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_aborted_clients{instance=\"$host\"}[$interval]) or irate(mysql_global_status_aborted_clients{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Aborted Clients (timeout)", "metric": "", "refId": "B", "step": 20, "target": "" } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Aborted Connections", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "cumulative" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": "", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "label": "", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**Table Locks**\n\nMySQL takes a number of different locks for varying reasons. In this graph we see how many Table level locks MySQL has requested from the storage engine. In the case of InnoDB, many times the locks could actually be row locks as it only takes table level locks in a few specific cases.\n\nIt is most useful to compare Locks Immediate and Locks Waited. If Locks waited is rising, it means you have lock contention. Otherwise, Locks Immediate rising and falling is normal activity.", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 12, "y": 38 }, "id": 32, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_table_locks_immediate{instance=\"$host\"}[$interval]) or irate(mysql_global_status_table_locks_immediate{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Table Locks Immediate", "metric": "", "refId": "A", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_table_locks_waited{instance=\"$host\"}[$interval]) or irate(mysql_global_status_table_locks_waited{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Table Locks Waited", "metric": "", "refId": "B", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Table Locks", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 45 }, "id": 388, "panels": [], "repeat": null, "title": "Network", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**MySQL Network Traffic**\n\nHere we can see how much network traffic is generated by MySQL. Outbound is network traffic sent from MySQL and Inbound is network traffic MySQL has received.", "editable": true, "error": false, "fill": 6, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 0, "y": 46 }, "id": 9, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_bytes_received{instance=\"$host\"}[$interval]) or irate(mysql_global_status_bytes_received{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Inbound", "metric": "", "refId": "A", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_bytes_sent{instance=\"$host\"}[$interval]) or irate(mysql_global_status_bytes_sent{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Outbound", "metric": "", "refId": "B", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Network Traffic", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "Bps", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "none", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": true, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**MySQL Network Usage Hourly**\n\nHere we can see how much network traffic is generated by MySQL per hour. You can use the bar graph to compare data sent by MySQL and data received by MySQL.", "editable": true, "error": false, "fill": 6, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 12, "y": 46 }, "height": "250px", "id": 381, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": false, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "increase(mysql_global_status_bytes_received{instance=\"$host\"}[1h])", "format": "time_series", "interval": "1h", "intervalFactor": 1, "legendFormat": "Received", "metric": "", "refId": "A", "step": 3600 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "increase(mysql_global_status_bytes_sent{instance=\"$host\"}[1h])", "format": "time_series", "interval": "1h", "intervalFactor": 1, "legendFormat": "Sent", "metric": "", "refId": "B", "step": 3600 } ], "thresholds": [], "timeFrom": "24h", "timeShift": null, "title": "MySQL Network Usage Hourly", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "none", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 53 }, "id": 389, "panels": [], "repeat": null, "title": "Memory", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 0, "description": "***System Memory***: Total Memory for the system.\\\n***InnoDB Buffer Pool Data***: InnoDB maintains a storage area called the buffer pool for caching data and indexes in memory.\\\n***TokuDB Cache Size***: Similar in function to the InnoDB Buffer Pool, TokuDB will allocate 50% of the installed RAM for its own cache.\\\n***Key Buffer Size***: Index blocks for MYISAM tables are buffered and are shared by all threads. key_buffer_size is the size of the buffer used for index blocks.\\\n***Adaptive Hash Index Size***: When InnoDB notices that some index values are being accessed very frequently, it builds a hash index for them in memory on top of B-Tree indexes.\\\n ***Query Cache Size***: The query cache stores the text of a SELECT statement together with the corresponding result that was sent to the client. The query cache has huge scalability problems in that only one thread can do an operation in the query cache at the same time.\\\n***InnoDB Dictionary Size***: The data dictionary is InnoDB ‘s internal catalog of tables. InnoDB stores the data dictionary on disk, and loads entries into memory while the server is running.\\\n***InnoDB Log Buffer Size***: The MySQL InnoDB log buffer allows transactions to run without having to write the log to disk before the transactions commit.", "editable": true, "error": false, "fill": 6, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 54 }, "id": 50, "legend": { "alignAsTable": true, "avg": true, "current": false, "hideEmpty": true, "hideZero": true, "max": true, "min": true, "rightSide": true, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [ { "title": "Detailed descriptions about metrics", "type": "absolute", "url": "https://www.percona.com/doc/percona-monitoring-and-management/dashboard.mysql-overview.html#mysql-internal-memory-overview" } ], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "System Memory", "fill": 0, "stack": false } ], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "expr": "node_memory_MemTotal_bytes{instance=\"$host\"}", "format": "time_series", "intervalFactor": 2, "legendFormat": "System Memory", "refId": "G", "step": 4 }, { "expr": "mysql_global_status_innodb_page_size{instance=\"$host\"} * on (instance) mysql_global_status_buffer_pool_pages{instance=\"$host\",state=\"data\"}", "format": "time_series", "hide": false, "interval": "$interval", "intervalFactor": 1, "legendFormat": "InnoDB Buffer Pool Data", "refId": "A", "step": 20 }, { "expr": "mysql_global_variables_innodb_log_buffer_size{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "InnoDB Log Buffer Size", "refId": "D", "step": 20 }, { "expr": "mysql_global_variables_innodb_additional_mem_pool_size{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 2, "legendFormat": "InnoDB Additional Memory Pool Size", "refId": "H", "step": 40 }, { "expr": "mysql_global_status_innodb_mem_dictionary{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "InnoDB Dictionary Size", "refId": "F", "step": 20 }, { "expr": "mysql_global_variables_key_buffer_size{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Key Buffer Size", "refId": "B", "step": 20 }, { "expr": "mysql_global_variables_query_cache_size{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Query Cache Size", "refId": "C", "step": 20 }, { "expr": "mysql_global_status_innodb_mem_adaptive_hash{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Adaptive Hash Index Size", "refId": "E", "step": 20 }, { "expr": "mysql_global_variables_tokudb_cache_size{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "TokuDB Cache Size", "refId": "I", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Internal Memory Overview", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 61 }, "id": 390, "panels": [], "repeat": null, "title": "Command, Handlers, Processes", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**Top Command Counters**\n\nThe Com_{{xxx}} statement counter variables indicate the number of times each xxx statement has been executed. There is one status variable for each type of statement. For example, Com_delete and Com_update count [``DELETE``](https://dev.mysql.com/doc/refman/5.7/en/delete.html) and [``UPDATE``](https://dev.mysql.com/doc/refman/5.7/en/update.html) statements, respectively. Com_delete_multi and Com_update_multi are similar but apply to [``DELETE``](https://dev.mysql.com/doc/refman/5.7/en/delete.html) and [``UPDATE``](https://dev.mysql.com/doc/refman/5.7/en/update.html) statements that use multiple-table syntax.", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 62 }, "id": 14, "legend": { "alignAsTable": true, "avg": true, "current": false, "hideEmpty": false, "hideZero": false, "max": true, "min": true, "rightSide": true, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [ { "title": "Server Status Variables (Com_xxx)", "type": "absolute", "url": "https://dev.mysql.com/doc/refman/5.7/en/server-status-variables.html#statvar_Com_xxx" } ], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "topk(5, rate(mysql_global_status_commands_total{instance=\"$host\"}[$interval])>0) or topk(5, irate(mysql_global_status_commands_total{instance=\"$host\"}[5m])>0)", "format": "time_series", "hide": false, "interval": "$interval", "intervalFactor": 1, "legendFormat": "Com_{{ command }}", "metric": "", "refId": "B", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "Top Command Counters", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": true, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**Top Command Counters Hourly**\n\nThe Com_{{xxx}} statement counter variables indicate the number of times each xxx statement has been executed. There is one status variable for each type of statement. For example, Com_delete and Com_update count [``DELETE``](https://dev.mysql.com/doc/refman/5.7/en/delete.html) and [``UPDATE``](https://dev.mysql.com/doc/refman/5.7/en/update.html) statements, respectively. Com_delete_multi and Com_update_multi are similar but apply to [``DELETE``](https://dev.mysql.com/doc/refman/5.7/en/delete.html) and [``UPDATE``](https://dev.mysql.com/doc/refman/5.7/en/update.html) statements that use multiple-table syntax.", "editable": true, "error": false, "fill": 6, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 69 }, "id": 39, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": true, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": false, "linewidth": 2, "links": [ { "dashboard": "https://dev.mysql.com/doc/refman/5.7/en/server-status-variables.html#statvar_Com_xxx", "title": "Server Status Variables (Com_xxx)", "type": "absolute", "url": "https://dev.mysql.com/doc/refman/5.7/en/server-status-variables.html#statvar_Com_xxx" } ], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "topk(5, increase(mysql_global_status_commands_total{instance=\"$host\"}[1h])>0)", "format": "time_series", "interval": "1h", "intervalFactor": 1, "legendFormat": "Com_{{ command }}", "metric": "", "refId": "A", "step": 3600 } ], "thresholds": [], "timeFrom": "24h", "timeShift": null, "title": "Top Command Counters Hourly", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**MySQL Handlers**\n\nHandler statistics are internal statistics on how MySQL is selecting, updating, inserting, and modifying rows, tables, and indexes.\n\nThis is in fact the layer between the Storage Engine and MySQL.\n\n* `read_rnd_next` is incremented when the server performs a full table scan and this is a counter you don't really want to see with a high value.\n* `read_key` is incremented when a read is done with an index.\n* `read_next` is incremented when the storage engine is asked to 'read the next index entry'. A high value means a lot of index scans are being done.", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 76 }, "id": 8, "legend": { "alignAsTable": true, "avg": true, "current": false, "hideZero": true, "max": true, "min": true, "rightSide": true, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_handlers_total{instance=\"$host\", handler!~\"commit|rollback|savepoint.*|prepare\"}[$interval]) or irate(mysql_global_status_handlers_total{instance=\"$host\", handler!~\"commit|rollback|savepoint.*|prepare\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "{{ handler }}", "metric": "", "refId": "J", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Handlers", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 83 }, "id": 28, "legend": { "alignAsTable": true, "avg": true, "current": false, "hideZero": true, "max": true, "min": true, "rightSide": true, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_handlers_total{instance=\"$host\", handler=~\"commit|rollback|savepoint.*|prepare\"}[$interval]) or irate(mysql_global_status_handlers_total{instance=\"$host\", handler=~\"commit|rollback|savepoint.*|prepare\"}[5m])", "interval": "$interval", "intervalFactor": 1, "legendFormat": "{{ handler }}", "metric": "", "refId": "A", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Transaction Handlers", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "fill": 0, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 90 }, "id": 40, "legend": { "alignAsTable": true, "avg": true, "current": false, "hideZero": true, "max": true, "min": false, "rightSide": true, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_info_schema_threads{instance=\"$host\"}", "interval": "$interval", "intervalFactor": 1, "legendFormat": "{{ state }}", "metric": "", "refId": "A", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "Process States", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": true, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "fill": 6, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 97 }, "id": 49, "legend": { "alignAsTable": true, "avg": true, "current": false, "hideZero": true, "max": true, "min": false, "rightSide": true, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": false, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "topk(5, avg_over_time(mysql_info_schema_threads{instance=\"$host\"}[1h]))", "interval": "1h", "intervalFactor": 1, "legendFormat": "{{ state }}", "metric": "", "refId": "A", "step": 3600 } ], "thresholds": [], "timeFrom": "24h", "timeShift": null, "title": "Top Process States Hourly", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 104 }, "id": 391, "panels": [], "repeat": null, "title": "Query Cache", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**MySQL Query Cache Memory**\n\nThe query cache has huge scalability problems in that only one thread can do an operation in the query cache at the same time. This serialization is true not only for SELECTs, but also for INSERT/UPDATE/DELETE.\n\nThis also means that the larger the `query_cache_size` is set to, the slower those operations become. In concurrent environments, the MySQL Query Cache quickly becomes a contention point, decreasing performance. MariaDB and AWS Aurora have done work to try and eliminate the query cache contention in their flavors of MySQL, while MySQL 8.0 has eliminated the query cache feature.\n\nThe recommended settings for most environments is to set:\n ``query_cache_type=0``\n ``query_cache_size=0``\n\nNote that while you can dynamically change these values, to completely remove the contention point you have to restart the database.", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 0, "y": 105 }, "id": 46, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_status_qcache_free_memory{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Free Memory", "metric": "", "refId": "F", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_variables_query_cache_size{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Query Cache Size", "metric": "", "refId": "E", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Query Cache Memory", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**MySQL Query Cache Activity**\n\nThe query cache has huge scalability problems in that only one thread can do an operation in the query cache at the same time. This serialization is true not only for SELECTs, but also for INSERT/UPDATE/DELETE.\n\nThis also means that the larger the `query_cache_size` is set to, the slower those operations become. In concurrent environments, the MySQL Query Cache quickly becomes a contention point, decreasing performance. MariaDB and AWS Aurora have done work to try and eliminate the query cache contention in their flavors of MySQL, while MySQL 8.0 has eliminated the query cache feature.\n\nThe recommended settings for most environments is to set:\n``query_cache_type=0``\n``query_cache_size=0``\n\nNote that while you can dynamically change these values, to completely remove the contention point you have to restart the database.", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 12, "y": 105 }, "height": "", "id": 45, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_qcache_hits{instance=\"$host\"}[$interval]) or irate(mysql_global_status_qcache_hits{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Hits", "metric": "", "refId": "B", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_qcache_inserts{instance=\"$host\"}[$interval]) or irate(mysql_global_status_qcache_inserts{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Inserts", "metric": "", "refId": "C", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_qcache_not_cached{instance=\"$host\"}[$interval]) or irate(mysql_global_status_qcache_not_cached{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Not Cached", "metric": "", "refId": "D", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_qcache_lowmem_prunes{instance=\"$host\"}[$interval]) or irate(mysql_global_status_qcache_lowmem_prunes{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Prunes", "metric": "", "refId": "F", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_status_qcache_queries_in_cache{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Queries in Cache", "metric": "", "refId": "E", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Query Cache Activity", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 112 }, "id": 392, "panels": [], "repeat": null, "title": "Files and Tables", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 0, "y": 113 }, "id": 43, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": false, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_opened_files{instance=\"$host\"}[$interval]) or irate(mysql_global_status_opened_files{instance=\"$host\"}[5m])", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Openings", "metric": "", "refId": "A", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL File Openings", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 12, "y": 113 }, "id": 41, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": false, "show": true, "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_status_open_files{instance=\"$host\"}", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Open Files", "metric": "", "refId": "A", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_variables_open_files_limit{instance=\"$host\"}", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Open Files Limit", "metric": "", "refId": "D", "step": 20 }, { "expr": "mysql_global_status_innodb_num_open_files{instance=\"$host\"}", "interval": "$interval", "intervalFactor": 1, "legendFormat": "InnoDB Open Files", "refId": "B", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Open Files", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 120 }, "id": 393, "panels": [], "repeat": null, "title": "Table Openings", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**MySQL Table Open Cache Status**\n\nThe recommendation is to set the `table_open_cache_instances` to a loose correlation to virtual CPUs, keeping in mind that more instances means the cache is split more times. If you have a cache set to 500 but it has 10 instances, each cache will only have 50 cached.\n\nThe `table_definition_cache` and `table_open_cache` can be left as default as they are auto-sized MySQL 5.6 and above (ie: do not set them to any value).", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 0, "y": 121 }, "id": 44, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [ { "title": "Server Status Variables (table_open_cache)", "type": "absolute", "url": "http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_table_open_cache" } ], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "Table Open Cache Hit Ratio", "yaxis": 2 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "rate(mysql_global_status_opened_tables{instance=\"$host\"}[$interval]) or irate(mysql_global_status_opened_tables{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Openings", "metric": "", "refId": "A", "step": 20 }, { "expr": "rate(mysql_global_status_table_open_cache_hits{instance=\"$host\"}[$interval]) or irate(mysql_global_status_table_open_cache_hits{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Hits", "refId": "B", "step": 20 }, { "expr": "rate(mysql_global_status_table_open_cache_misses{instance=\"$host\"}[$interval]) or irate(mysql_global_status_table_open_cache_misses{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Misses", "refId": "C", "step": 20 }, { "expr": "rate(mysql_global_status_table_open_cache_overflows{instance=\"$host\"}[$interval]) or irate(mysql_global_status_table_open_cache_overflows{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Misses due to Overflows", "refId": "D", "step": 20 }, { "expr": "(rate(mysql_global_status_table_open_cache_hits{instance=\"$host\"}[$interval]) or irate(mysql_global_status_table_open_cache_hits{instance=\"$host\"}[5m]))/((rate(mysql_global_status_table_open_cache_hits{instance=\"$host\"}[$interval]) or irate(mysql_global_status_table_open_cache_hits{instance=\"$host\"}[5m]))+(rate(mysql_global_status_table_open_cache_misses{instance=\"$host\"}[$interval]) or irate(mysql_global_status_table_open_cache_misses{instance=\"$host\"}[5m])))", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Table Open Cache Hit Ratio", "refId": "E", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Table Open Cache Status", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "percentunit", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**MySQL Open Tables**\n\nThe recommendation is to set the `table_open_cache_instances` to a loose correlation to virtual CPUs, keeping in mind that more instances means the cache is split more times. If you have a cache set to 500 but it has 10 instances, each cache will only have 50 cached.\n\nThe `table_definition_cache` and `table_open_cache` can be left as default as they are auto-sized MySQL 5.6 and above (ie: do not set them to any value).", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 12, "x": 12, "y": 121 }, "id": 42, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [ { "title": "Server Status Variables (table_open_cache)", "type": "absolute", "url": "http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_table_open_cache" } ], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_status_open_tables{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Open Tables", "metric": "", "refId": "B", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_variables_table_open_cache{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Table Open Cache", "metric": "", "refId": "C", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Open Tables", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 128 }, "id": 394, "panels": [], "repeat": null, "title": "MySQL Table Definition Cache", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "description": "**MySQL Table Definition Cache**\n\nThe recommendation is to set the `table_open_cache_instances` to a loose correlation to virtual CPUs, keeping in mind that more instances means the cache is split more times. If you have a cache set to 500 but it has 10 instances, each cache will only have 50 cached.\n\nThe `table_definition_cache` and `table_open_cache` can be left as default as they are auto-sized MySQL 5.6 and above (ie: do not set them to any value).", "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 24, "x": 0, "y": 129 }, "id": 54, "legend": { "alignAsTable": true, "avg": true, "current": false, "max": true, "min": true, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [ { "title": "Server Status Variables (table_open_cache)", "type": "absolute", "url": "http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_table_open_cache" } ], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "Opened Table Definitions", "yaxis": 2 } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_status_open_table_definitions{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Open Table Definitions", "metric": "", "refId": "B", "step": 20 }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "mysql_global_variables_table_definition_cache{instance=\"$host\"}", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Table Definitions Cache Size", "metric": "", "refId": "C", "step": 20 }, { "expr": "rate(mysql_global_status_opened_table_definitions{instance=\"$host\"}[$interval]) or irate(mysql_global_status_opened_table_definitions{instance=\"$host\"}[5m])", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Opened Table Definitions", "refId": "A", "step": 20 } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "MySQL Table Definition Cache", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "short", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 136 }, "id": 395, "panels": [], "repeat": null, "title": "System Charts", "type": "row" }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": null, "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 8, "x": 0, "y": 137 }, "id": 31, "legend": { "alignAsTable": false, "avg": true, "current": false, "hideEmpty": false, "max": false, "min": false, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2s", "datasourceErrors": {}, "errors": {}, "expr": "rate(node_vmstat_pgpgin{instance=\"$host\"}[$interval]) * 1024 or irate(node_vmstat_pgpgin{instance=\"$host\"}[5m]) * 1024", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Page In", "metric": "", "refId": "A", "step": 20, "target": "" }, { "calculatedInterval": "2s", "datasourceErrors": {}, "errors": {}, "expr": "rate(node_vmstat_pgpgout{instance=\"$host\"}[$interval]) * 1024 or irate(node_vmstat_pgpgout{instance=\"$host\"}[5m]) * 1024", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Page Out", "metric": "", "refId": "B", "step": 20, "target": "" } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "I/O Activity", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "transparent": false, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "Bps", "label": "", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "bytes", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": null, "editable": true, "error": false, "fill": 6, "grid": {}, "gridPos": { "h": 7, "w": 8, "x": 8, "y": 137 }, "height": "250px", "id": 37, "legend": { "alignAsTable": false, "avg": true, "current": false, "hideEmpty": false, "max": false, "min": false, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "calculatedInterval": "2s", "datasourceErrors": {}, "errors": {}, "expr": "node_memory_MemTotal_bytes{instance=\"$host\"} - (node_memory_MemFree_bytes{instance=\"$host\"} + node_memory_Buffers{instance=\"$host\"} + node_memory_Cached{instance=\"$host\"})", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Used", "metric": "", "refId": "A", "step": 20, "target": "" }, { "calculatedInterval": "2s", "datasourceErrors": {}, "errors": {}, "expr": "node_memory_MemFree_bytes{instance=\"$host\"}", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Free", "metric": "", "refId": "B", "step": 20, "target": "" }, { "calculatedInterval": "2s", "datasourceErrors": {}, "errors": {}, "expr": "node_memory_Buffers{instance=\"$host\"}", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Buffers", "metric": "", "refId": "D", "step": 20, "target": "" }, { "calculatedInterval": "2s", "datasourceErrors": {}, "errors": {}, "expr": "node_memory_Cached{instance=\"$host\"}", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Cached", "metric": "", "refId": "E", "step": 20, "target": "" } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "Memory Distribution", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "transparent": false, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "bytes", "label": "", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "bytes", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": { "Load 1m": "#58140C", "Max Core Utilization": "#bf1b00", "iowait": "#e24d42", "nice": "#1f78c1", "softirq": "#806eb7", "system": "#eab839", "user": "#508642" }, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": null, "editable": true, "error": false, "fill": 6, "grid": {}, "gridPos": { "h": 7, "w": 8, "x": 16, "y": 137 }, "height": "", "id": 2, "legend": { "alignAsTable": false, "avg": true, "current": false, "hideEmpty": true, "hideZero": true, "max": false, "min": false, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "Max Core Utilization", "lines": false, "pointradius": 1, "points": true, "stack": false }, { "alias": "Load 1m", "color": "#58140C", "fill": 2, "stack": false, "yaxis": 2 } ], "spaceLength": 10, "stack": true, "steppedLine": false, "targets": [ { "calculatedInterval": "2s", "datasourceErrors": {}, "errors": {}, "expr": "clamp_max(((avg by (mode) ( (clamp_max(rate(node_cpu_seconds_total{instance=\"$host\",mode!=\"idle\"}[$interval]),1)) or (clamp_max(irate(node_cpu_seconds_total{instance=\"$host\",mode!=\"idle\"}[5m]),1)) ))*100 or (avg_over_time(node_cpu_seconds_total_average{instance=~\"$host\", mode!=\"total\", mode!=\"idle\"}[$interval]) or avg_over_time(node_cpu_seconds_total_average{instance=~\"$host\", mode!=\"total\", mode!=\"idle\"}[5m]))),100)", "format": "time_series", "hide": false, "interval": "$interval", "intervalFactor": 1, "legendFormat": "{{ mode }}", "metric": "", "refId": "A", "step": 20 }, { "expr": "clamp_max(max by () (sum by (cpu) ( (clamp_max(rate(node_cpu_seconds_total{instance=\"$host\",mode!=\"idle\",mode!=\"iowait\"}[$interval]),1)) or (clamp_max(irate(node_cpu_seconds_total{instance=\"$host\",mode!=\"idle\",mode!=\"iowait\"}[5m]),1)) ))*100,100)", "format": "time_series", "hide": true, "interval": "$interval", "intervalFactor": 1, "legendFormat": "Max Core Utilization", "refId": "B", "step": 20 }, { "expr": "node_load1{instance=\"$host\"}", "format": "time_series", "hide": false, "intervalFactor": 2, "legendFormat": "Load 1m", "refId": "C" } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "CPU Usage / Load", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "decimals": 1, "format": "percent", "label": "", "logBase": 1, "max": 100, "min": 0, "show": true }, { "format": "none", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 2, "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 8, "x": 0, "y": 144 }, "height": "250px", "id": 36, "legend": { "alignAsTable": false, "avg": true, "current": false, "hideEmpty": true, "hideZero": true, "max": false, "min": false, "rightSide": false, "show": true, "total": false, "values": true }, "lines": false, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 1, "points": true, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "sum((rate(node_disk_read_time_seconds_total{device!~\"dm-.+\", instance=\"$host\"}[$interval]) / rate(node_disk_reads_completed_total{device!~\"dm-.+\", instance=\"$host\"}[$interval])) or (irate(node_disk_read_time_seconds_total{device!~\"dm-.+\", instance=\"$host\"}[5m]) / irate(node_disk_reads_completed_total{device!~\"dm-.+\", instance=\"$host\"}[5m]))\nor avg_over_time(aws_rds_read_latency_average{instance=\"$host\"}[$interval]) or avg_over_time(aws_rds_read_latency_average{instance=\"$host\"}[5m]))", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Read", "metric": "", "refId": "A", "step": 20, "target": "" }, { "calculatedInterval": "2m", "datasourceErrors": {}, "errors": {}, "expr": "sum((rate(node_disk_write_time_seconds_total{device!~\"dm-.+\", instance=\"$host\"}[$interval]) / rate(node_disk_writes_completed_total{device!~\"dm-.+\", instance=\"$host\"}[$interval])) or (irate(node_disk_write_time_seconds_total{device!~\"dm-.+\", instance=\"$host\"}[5m]) / irate(node_disk_writes_completed_total{device!~\"dm-.+\", instance=\"$host\"}[5m])) or \navg_over_time(aws_rds_write_latency_average{instance=\"$host\"}[$interval]) or avg_over_time(aws_rds_write_latency_average{instance=\"$host\"}[5m]))", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Write", "metric": "", "refId": "B", "step": 20, "target": "" } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "Disk Latency", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "transparent": false, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "ms", "label": "", "logBase": 2, "max": null, "min": null, "show": true }, { "format": "ms", "label": "", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": null, "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 8, "x": 8, "y": 144 }, "height": "250px", "id": 21, "legend": { "alignAsTable": false, "avg": true, "current": false, "hideEmpty": false, "max": false, "min": false, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [ { "alias": "Outbound", "transform": "negative-Y" } ], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2s", "datasourceErrors": {}, "errors": {}, "expr": "sum(rate(node_network_receive_bytes_total{instance=\"$host\", device!=\"lo\"}[$interval])) or sum(irate(node_network_receive_bytes_total{instance=\"$host\", device!=\"lo\"}[5m])) or sum(max_over_time(rdsosmetrics_network_rx{instance=\"$host\"}[$interval])) or sum(max_over_time(rdsosmetrics_network_rx{instance=\"$host\"}[5m])) ", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Inbound", "metric": "", "refId": "B", "step": 20, "target": "" }, { "calculatedInterval": "2s", "datasourceErrors": {}, "errors": {}, "expr": "sum(rate(node_network_transmit_bytes_total{instance=\"$host\", device!=\"lo\"}[$interval])) or sum(irate(node_network_transmit_bytes_total{instance=\"$host\", device!=\"lo\"}[5m])) or\nsum(max_over_time(rdsosmetrics_network_tx{instance=\"$host\"}[$interval])) or sum(max_over_time(rdsosmetrics_network_tx{instance=\"$host\"}[5m]))", "format": "time_series", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Outbound", "metric": "", "refId": "A", "step": 20, "target": "" } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "Network Traffic", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "transparent": false, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "Bps", "label": "", "logBase": 1, "max": null, "min": null, "show": true }, { "format": "bytes", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": null, "editable": true, "error": false, "fill": 2, "grid": {}, "gridPos": { "h": 7, "w": 8, "x": 16, "y": 144 }, "id": 38, "legend": { "alignAsTable": false, "avg": true, "current": false, "hideEmpty": false, "max": false, "min": false, "rightSide": false, "show": true, "sort": "avg", "sortDesc": true, "total": false, "values": true }, "lines": true, "linewidth": 2, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "calculatedInterval": "2s", "datasourceErrors": {}, "errors": {}, "expr": "rate(node_vmstat_pswpin{instance=\"$host\"}[$interval]) * 4096 or irate(node_vmstat_pswpin{instance=\"$host\"}[5m]) * 4096", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Swap In (Reads)", "metric": "", "refId": "A", "step": 20, "target": "" }, { "calculatedInterval": "2s", "datasourceErrors": {}, "errors": {}, "expr": "rate(node_vmstat_pswpout{instance=\"$host\"}[$interval]) * 4096 or irate(node_vmstat_pswpout{instance=\"$host\"}[5m]) * 4096", "interval": "$interval", "intervalFactor": 1, "legendFormat": "Swap Out (Writes)", "metric": "", "refId": "B", "step": 20, "target": "" } ], "thresholds": [], "timeFrom": null, "timeShift": null, "title": "Swap Activity", "tooltip": { "msResolution": false, "shared": true, "sort": 0, "value_type": "individual" }, "transparent": false, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "Bps", "label": "", "logBase": 1, "max": null, "min": 0, "show": true }, { "format": "bytes", "logBase": 1, "max": null, "min": 0, "show": true } ], "yaxis": { "align": false, "alignLevel": null } } ], "refresh": "1m", "schemaVersion": 16, "style": "dark", "tags": [ "Percona", "MySQL" ], "templating": { "list": [ { "allFormat": "glob", "auto": true, "auto_count": 200, "auto_min": "1s", "current": { "text": "auto", "value": "$__auto_interval_interval" }, "datasource": "Prometheus", "hide": 0, "includeAll": false, "label": "Interval", "multi": false, "multiFormat": "glob", "name": "interval", "options": [ { "selected": true, "text": "auto", "value": "$__auto_interval_interval" }, { "selected": false, "text": "1s", "value": "1s" }, { "selected": false, "text": "5s", "value": "5s" }, { "selected": false, "text": "1m", "value": "1m" }, { "selected": false, "text": "5m", "value": "5m" }, { "selected": false, "text": "1h", "value": "1h" }, { "selected": false, "text": "6h", "value": "6h" }, { "selected": false, "text": "1d", "value": "1d" } ], "query": "1s,5s,1m,5m,1h,6h,1d", "refresh": 2, "type": "interval" }, { "allFormat": "glob", "allValue": null, "current": {}, "datasource": "Prometheus", "hide": 0, "includeAll": false, "label": "Host", "multi": false, "multiFormat": "regex values", "name": "host", "options": [], "query": "label_values(mysql_up, instance)", "refresh": 1, "refresh_on_load": false, "regex": "", "sort": 1, "tagValuesQuery": null, "tags": [], "tagsQuery": null, "type": "query", "useTags": false } ] }, "time": { "from": "now-12h", "to": "now" }, "timepicker": { "collapse": false, "enable": true, "hidden": false, "notice": false, "now": true, "refresh_intervals": [ "5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d" ], "status": "Stable", "time_options": [ "5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d" ], "type": "timepicker" }, "timezone": "browser", "title": "MySQL Overview", "uid": "MQWgroiiz", "version": 1, "description": "Dashboard from Percona Monitoring and Management project. " }
  consul-exporter.json: | 
    { "annotations": { "list": [ { "$$hashKey": "object:474", "builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard" } ] }, "description": "Consul Exporter Dashboar for Prometheus", "editable": true, "gnetId": 12049, "graphTooltip": 0, "id": 6, "links": [], "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 1, "fillGradient": 0, "gridPos": { "h": 5, "w": 6, "x": 0, "y": 0 }, "hiddenSeries": false, "id": 2, "interval": "", "legend": { "avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "paceLength": 10, "percentage": false, "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "consul_catalog_services", "format": "time_series", "intervalFactor": 1, "legendFormat": "{{app}}", "refId": "A" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Total Services", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "fill": 1, "fillGradient": 0, "gridPos": { "h": 5, "w": 6, "x": 6, "y": 0 }, "hiddenSeries": false, "id": 4, "legend": { "avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "paceLength": 10, "percentage": false, "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "consul_raft_peers", "format": "time_series", "intervalFactor": 1, "legendFormat": "peers", "refId": "A" }, { "expr": "consul_raft_leader", "format": "time_series", "intervalFactor": 1, "legendFormat": "leader", "refId": "B" }, { "expr": "consul_serf_lan_members", "format": "time_series", "instant": false, "intervalFactor": 1, "legendFormat": "serf_lan_members", "refId": "C" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Consul Peers and Leaders", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 0, "fill": 1, "fillGradient": 0, "gridPos": { "h": 11, "w": 12, "x": 12, "y": 0 }, "hiddenSeries": false, "id": 8, "legend": { "alignAsTable": true, "avg": false, "current": true, "hideEmpty": true, "hideZero": true, "max": true, "min": false, "rightSide": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "paceLength": 10, "percentage": false, "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "sum by (service_name, status) (consul_health_service_status{status!=\"passing\"})", "format": "time_series", "interval": "", "intervalFactor": 1, "legendFormat": "{{service_name}} - {{status}}", "refId": "A" } ], "thresholds": [ { "colorMode": "critical", "fill": true, "line": true, "op": "gt", "value": 0, "yaxis": "left" } ], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Unhealthy Consul Services", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "decimals": null, "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "decimals": null, "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 0, "fill": 1, "fillGradient": 0, "gridPos": { "h": 6, "w": 12, "x": 0, "y": 5 }, "hiddenSeries": false, "id": 6, "legend": { "alignAsTable": true, "avg": false, "current": true, "hideEmpty": true, "hideZero": true, "max": true, "min": false, "rightSide": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "paceLength": 10, "percentage": false, "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "consul_health_node_status{status!='passing'}", "format": "time_series", "intervalFactor": 1, "legendFormat": "{{node}} - {{status}}", "refId": "A" } ], "thresholds": [ { "colorMode": "critical", "fill": true, "line": true, "op": "gt", "value": 0, "yaxis": "left" } ], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Unhealthy Consul Nodes", "tooltip": { "shared": true, "sort": 1, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } }, { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": "Prometheus", "decimals": 0, "fill": 1, "fillGradient": 0, "gridPos": { "h": 11, "w": 24, "x": 0, "y": 11 }, "hiddenSeries": false, "id": 10, "legend": { "alignAsTable": true, "avg": false, "current": true, "hideEmpty": true, "hideZero": true, "max": true, "min": false, "rightSide": true, "show": true, "total": false, "values": true }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "options": { "dataLinks": [] }, "paceLength": 10, "percentage": false, "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "sum by (node,service_id,status) (consul_health_service_status)", "format": "time_series", "intervalFactor": 1, "legendFormat": "{{node}} - {{service_id}} - {{status}}", "refId": "A" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Consul Services and Checks", "tooltip": { "shared": true, "sort": 1, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } } ], "refresh": false, "schemaVersion": 22, "style": "dark", "tags": [], "templating": { "list": [] }, "time": { "from": "now-15m", "to": "now" }, "timepicker": { "refresh_intervals": [ "5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d" ], "time_options": [ "5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d" ] }, "timezone": "", "title": "Consul Exporter Dashboard", "uid": "g7j0xhjZk", "variables": { "list": [] }, "version": 1 }  